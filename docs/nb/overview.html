<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.35">
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">
<meta name="author" content="Thomas E. Gorman">
<meta name="dcterms.date" content="2024-11-20">
<title>Effect of Reference Class on Planning to Conserve â€“ Representation Study</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
/* CSS for syntax highlighting */
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
  }
pre.numberSource { margin-left: 3em;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
</style>

<script src="../site_libs/quarto-nav/quarto-nav.js"></script>
<script src="../site_libs/clipboard/clipboard.min.js"></script>
<script src="../site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="../site_libs/quarto-search/fuse.min.js"></script>
<script src="../site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="../">
<link href="../misc/outlier.html" rel="next">
<link href="../nb/results.html" rel="prev">
<script src="../site_libs/quarto-html/quarto.js"></script>
<script src="../site_libs/quarto-html/popper.min.js"></script>
<script src="../site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="../site_libs/quarto-html/anchor.min.js"></script>
<link href="../site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="../site_libs/quarto-html/quarto-syntax-highlighting-383d4a065b21370043bc4709e21900a7.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="../site_libs/bootstrap/bootstrap.min.js"></script>
<link href="../site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="../site_libs/bootstrap/bootstrap-22ab91ee63bfb1fa4abd865bfe32346b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/all.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/fontawesome6-0.1.0/latex-fontsize.css" rel="stylesheet">
<script src="../site_libs/quarto-contrib/glightbox/glightbox.min.js"></script>
<link href="../site_libs/quarto-contrib/glightbox/glightbox.min.css" rel="stylesheet">
<link href="../site_libs/quarto-contrib/glightbox/lightbox.css" rel="stylesheet"><script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script><style>html{ scroll-behavior: smooth; }</style>
<link rel="stylesheet" href="../assets/style_qt.css">
</head>
<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top"><nav class="navbar navbar-expand-lg " data-bs-theme="dark"><div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="../index.html">
    <span class="navbar-title">Representation Study</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" role="menu" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
<li class="nav-item compact">
    <a class="nav-link" href="https://github.com/tegorman13/Representation_Study"> <i class="bi bi-github" role="img" aria-label="github">
</i> 
<span class="menu-text"></span></a>
  </li>  
</ul>
<ul class="navbar-nav navbar-nav-scroll ms-auto">
<li class="nav-item">
    <a class="nav-link" href="../background/bg.html"> 
<span class="menu-text">Study Info</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link" href="../nb/analysis.html"> 
<span class="menu-text">Analysis</span></a>
  </li>  
  <li class="nav-item">
    <a class="nav-link active" href="../paper.html" aria-current="page"> 
<span class="menu-text">Paper</span></a>
  </li>  
</ul>
</div> <!-- /navcollapse -->
            <div class="quarto-navbar-tools">
</div>
      </div> <!-- /container-fluid -->
    </nav><nav class="quarto-secondary-nav"><div class="container-fluid d-flex">
      <button type="button" class="quarto-btn-toggle btn" data-bs-toggle="collapse" role="button" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
        <i class="bi bi-layout-text-sidebar-reverse"></i>
      </button>
        <nav class="quarto-page-breadcrumbs" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../nb/study1.html"><strong>Analysis</strong></a></li><li class="breadcrumb-item"><a href="../nb/overview.html">Overview</a></li></ol></nav>
        <a class="flex-grow-1" role="navigation" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">      
        </a>
    </div>
  </nav></header><!-- content --><div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-full page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse collapse-horizontal quarto-sidebar-collapse-item sidebar-navigation docked overflow-auto"><div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../index.html" class="sidebar-item-text sidebar-link">
 <span class="menu-text">Home</span></a>
  </div>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true">
 <span class="menu-text"><strong>Paper</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-1" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-1" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../paper.html" class="sidebar-item-text sidebar-link"><i class="bi bi-file-text-fill" role="img">
</i> 
 <span class="menu-text">Manuscript</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mpa/mpa_abstract.html" class="sidebar-item-text sidebar-link"><i class="bi bi-file-text-fill" role="img">
</i> 
 <span class="menu-text">MPA</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true">
 <span class="menu-text"><strong>Analysis</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-2" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-2" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../nb/study1.html" class="sidebar-item-text sidebar-link"><i class="bi bi-laptop" role="img">
</i> 
 <span class="menu-text">Study 1</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../nb/study2.html" class="sidebar-item-text sidebar-link"><i class="bi bi-laptop" role="img">
</i> 
 <span class="menu-text">Study 2</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../nb/results.html" class="sidebar-item-text sidebar-link"><i class="bi bi-bar-chart-fill" role="img">
</i> 
 <span class="menu-text">Results</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../nb/overview.html" class="sidebar-item-text sidebar-link active"><i class="bi bi-signpost-split-fill" role="img">
</i> 
 <span class="menu-text">Overview</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/outlier.html" class="sidebar-item-text sidebar-link"><i class="bi bi-graph-down" role="img">
</i> 
 <span class="menu-text">Outliers</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/indiv.html" class="sidebar-item-text sidebar-link"><i class="bi bi-bar-chart-steps" role="img">
</i> 
 <span class="menu-text">Response Patterns</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/discrep.html" class="sidebar-item-text sidebar-link"><i class="bi bi-columns-gap" role="img">
</i> 
 <span class="menu-text">Discrep_Patterns</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../misc/ordinal.html" class="sidebar-item-text sidebar-link"><i class="bi bi-grid-3x2-gap-fill" role="img">
</i> 
 <span class="menu-text">Ordinal Models</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../mpa/mpa_analysis.html" class="sidebar-item-text sidebar-link"><i class="bi bi-clipboard" role="img">
</i> 
 <span class="menu-text">MPA</span></a>
  </div>
</li>
      </ul>
</li>
        <li class="sidebar-item sidebar-item-section">
      <div class="sidebar-item-container"> 
            <a class="sidebar-item-text sidebar-link text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true">
 <span class="menu-text"><strong>Background</strong></span></a>
          <a class="sidebar-item-toggle text-start" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar-section-3" role="navigation" aria-expanded="true" aria-label="Toggle section">
            <i class="bi bi-chevron-right ms-2"></i>
          </a> 
      </div>
      <ul id="quarto-sidebar-section-3" class="collapse list-unstyled sidebar-section depth1 show">
<li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../background/study_stim.html" class="sidebar-item-text sidebar-link"><i class="bi bi-pencil" role="img">
</i> 
 <span class="menu-text">Design and Stimulii</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../background/study_info.html" class="sidebar-item-text sidebar-link"><i class="bi bi-file-earmark" role="img">
</i> 
 <span class="menu-text">study 2 full info</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../background/initial_slides.html" class="sidebar-item-text sidebar-link"><i class="bi bi-file-earmark-slides-fill" role="img">
</i> 
 <span class="menu-text">MPA_Slides</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../background/study1_info.html" class="sidebar-item-text sidebar-link"><i class="bi bi-file-post" role="img">
</i> 
 <span class="menu-text">study 1 codebook</span></a>
  </div>
</li>
          <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="../background/study2_info.html" class="sidebar-item-text sidebar-link"><i class="bi bi-file-post" role="img">
</i> 
 <span class="menu-text">study 2 codebook</span></a>
  </div>
</li>
      </ul>
</li>
    </ul>
</div>
</nav><div id="quarto-sidebar-glass" class="quarto-sidebar-collapse-item" data-bs-toggle="collapse" data-bs-target=".quarto-sidebar-collapse-item"></div>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
    <div class="quarto-alternate-formats"><h2>Other Formats</h2><ul><li><a href="overview_hugo.md"><i class="bi bi-file-code"></i>CommonMark (hugo)</a></li><li><a href="overview_gfm.md"><i class="bi bi-file-code"></i>Github (GFM)</a></li></ul></div></div>
<!-- main -->
<main class="content column-body" id="quarto-document-content"><header id="title-block-header" class="quarto-title-block default"><nav class="quarto-page-breadcrumbs quarto-title-breadcrumbs d-none d-lg-block" aria-label="breadcrumb"><ol class="breadcrumb"><li class="breadcrumb-item"><a href="../nb/study1.html"><strong>Analysis</strong></a></li><li class="breadcrumb-item"><a href="../nb/overview.html">Overview</a></li></ol></nav><div class="quarto-title">
<div class="quarto-title-block"><div><h1 class="title">Effect of Reference Class on Planning to Conserve</h1><button type="button" class="btn code-tools-button dropdown-toggle" id="quarto-code-tools-menu" data-bs-toggle="dropdown" aria-expanded="false"><i class="bi"></i> Code</button><ul class="dropdown-menu dropdown-menu-end" aria-labelelledby="quarto-code-tools-menu"><li><a id="quarto-show-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Show All Code</a></li><li><a id="quarto-hide-all-code" class="dropdown-item" href="javascript:void(0)" role="button">Hide All Code</a></li><li><hr class="dropdown-divider"></li><li><a id="quarto-view-source" class="dropdown-item" href="javascript:void(0)" role="button">View Source</a></li></ul></div></div>
</div>


<div class="quarto-title-meta-author column-body">
  <div class="quarto-title-meta-heading">Author</div>
  <div class="quarto-title-meta-heading">Affiliation</div>
  
    <div class="quarto-title-meta-contents">
    <p class="author"><a href="https://tegorman13.github.io/">Thomas E. Gorman</a> </p>
  </div>
  <div class="quarto-title-meta-contents">
        <p class="affiliation">
            <a href="https://web.ics.purdue.edu/~treimer/">
            Communication and Cognition Lab, Purdue University, USA
            </a>
          </p>
      </div>
  </div>

<div class="quarto-title-meta column-body">

      
    <div>
    <div class="quarto-title-meta-heading">Published</div>
    <div class="quarto-title-meta-contents">
      <p class="date">November 20, 2024</p>
    </div>
  </div>
  
    
  </div>
  


</header><div class="cell">
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb1"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">pacman</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pacman/man/p_load.html">p_load</a></span><span class="op">(</span><span class="va">dplyr</span>,<span class="va">purrr</span>,<span class="va">tidyr</span>,<span class="va">here</span>,<span class="va">tibble</span>,<span class="va">brms</span>,<span class="va">rstan</span>,<span class="va">bayestestR</span>,<span class="va">emmeans</span>,<span class="va">tidybayes</span>,<span class="va">modelsummary</span>,</span>
<span>               <span class="va">ggplot2</span>,<span class="va">gt</span>,<span class="va">knitr</span>,<span class="va">kableExtra</span>,<span class="va">ggh4x</span>,<span class="va">lme4</span>,<span class="va">flextable</span>,<span class="va">pander</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/options.html">options</a></span><span class="op">(</span>digits<span class="op">=</span><span class="fl">2</span>, scipen<span class="op">=</span><span class="fl">999</span>, dplyr.summarise.inform<span class="op">=</span><span class="cn">FALSE</span><span class="op">)</span></span>
<span><span class="fu">walk</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"fun_plot"</span><span class="op">)</span>, <span class="op">~</span> <span class="kw"><a href="https://rdrr.io/r/base/source.html">source</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="st">"scripts/"</span>, <span class="va">.x</span>, <span class="st">".R"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu">theme_set</span><span class="op">(</span><span class="fu">theme_nice</span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/s1_processed.rds"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="va">id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/s1_discrep_ids.rds"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="va">s2_long</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/s2_processed.rds"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="op">!</span><span class="op">(</span><span class="va">id</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/readRDS.html">readRDS</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/s2_discrep_ids.rds"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">state_code_map</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span></span>
<span>  <span class="st">"CAL"</span> <span class="op">=</span> <span class="st">"California"</span>,</span>
<span>  <span class="st">"TEX"</span> <span class="op">=</span> <span class="st">"Texas"</span>,</span>
<span>  <span class="st">"COL"</span> <span class="op">=</span> <span class="st">"Colorado"</span>,</span>
<span>  <span class="st">"MASS"</span> <span class="op">=</span> <span class="st">"Massachusetts"</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">state_to_code</span> <span class="op">&lt;-</span> <span class="va">state_code_map</span></span>
<span><span class="va">code_to_state</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/setNames.html">setNames</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">state_code_map</span><span class="op">)</span>, <span class="va">state_code_map</span><span class="op">)</span></span>
<span><span class="va">lookup_code</span> <span class="op">&lt;-</span> <span class="kw">function</span><span class="op">(</span><span class="va">state</span><span class="op">)</span> <span class="op">{</span></span>
<span>  <span class="kw">if</span> <span class="op">(</span><span class="va">state</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">state_to_code</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">state_to_code</span><span class="op">[[</span><span class="va">state</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="kw">if</span> <span class="op">(</span><span class="va">state</span> <span class="op"><a href="https://rdrr.io/r/base/match.html">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/names.html">names</a></span><span class="op">(</span><span class="va">code_to_state</span><span class="op">)</span><span class="op">)</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="va">code_to_state</span><span class="op">[[</span><span class="va">state</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span>  <span class="op">}</span> <span class="kw">else</span> <span class="op">{</span></span>
<span>    <span class="kw"><a href="https://rdrr.io/r/base/function.html">return</a></span><span class="op">(</span><span class="cn">NA</span><span class="op">)</span>  <span class="co"># Return NA if not found in either mapping</span></span>
<span>  <span class="op">}</span></span>
<span><span class="op">}</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
<div class="cell">
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb2"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">s1</span> <span class="op">|&gt;</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">refClass</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">rename</span><span class="op">(</span><span class="st">"Reference Class"</span> <span class="op">=</span> <span class="va">refClass</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span>n<span class="op">=</span><span class="fu">n_distinct</span><span class="op">(</span><span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Study 1: Number of unique IDs per condition"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
----------------------
 Reference Class   n  
----------------- ----
   Percentage      68 

       USD         89 

       kWh         78 
----------------------

Table: Study 1: Number of unique IDs per condition</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb4"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">s1</span> <span class="op">|&gt;</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">refClass</span>,<span class="va">state</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">rename</span><span class="op">(</span><span class="st">"Reference Class"</span> <span class="op">=</span> <span class="va">refClass</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span>n<span class="op">=</span><span class="fu">n_distinct</span><span class="op">(</span><span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">rowwise</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>state<span class="op">=</span><span class="fu">lookup_code</span><span class="op">(</span><span class="va">state</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">pivot_wider</span><span class="op">(</span>names_from<span class="op">=</span><span class="va">state</span>,values_from<span class="op">=</span><span class="va">n</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Study 1: Number of unique IDs per condition by state"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
-----------------------------------------------------------------
 Reference Class   California   Colorado   Massachusetts   Texas 
----------------- ------------ ---------- --------------- -------
   Percentage          39          26           42          29   

       USD             40          45           44          49   

       kWh             36          36           42          42   
-----------------------------------------------------------------

Table: Study 1: Number of unique IDs per condition by state</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb6"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">s1</span> <span class="op">|&gt;</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">refClass</span>,<span class="va">calc</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">rename</span><span class="op">(</span><span class="st">"Reference Class"</span> <span class="op">=</span> <span class="va">refClass</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span>n<span class="op">=</span><span class="fu">n_distinct</span><span class="op">(</span><span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">pivot_wider</span><span class="op">(</span>names_from<span class="op">=</span><span class="va">calc</span>,values_from<span class="op">=</span><span class="va">n</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Study 1: Number of unique IDs per condition by calculator use"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
---------------------------------------------------
 Reference Class   No Calculator   Used Calculator 
----------------- --------------- -----------------
   Percentage           12               56        

       USD              25               64        

       kWh              20               58        
---------------------------------------------------

Table: Study 1: Number of unique IDs per condition by calculator use</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb8"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html">prop.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/xtabs.html">xtabs</a></span><span class="op">(</span><span class="op">~</span><span class="va">refClass</span>,<span class="va">s1</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">refClass</th>
<th style="text-align: right;">Freq</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">kWh</td>
<td style="text-align: right;">0.33</td>
</tr>
<tr class="even">
<td style="text-align: left;">Percentage</td>
<td style="text-align: right;">0.29</td>
</tr>
<tr class="odd">
<td style="text-align: left;">USD</td>
<td style="text-align: right;">0.38</td>
</tr>
</tbody>
</table>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb9"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html">prop.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/xtabs.html">xtabs</a></span><span class="op">(</span><span class="op">~</span><span class="va">refClass</span><span class="op">+</span><span class="va">calc</span>,<span class="va">s1</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">No Calculator</th>
<th style="text-align: right;">Used Calculator</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">kWh</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: right;">0.25</td>
</tr>
<tr class="even">
<td style="text-align: left;">Percentage</td>
<td style="text-align: right;">0.05</td>
<td style="text-align: right;">0.24</td>
</tr>
<tr class="odd">
<td style="text-align: left;">USD</td>
<td style="text-align: right;">0.11</td>
<td style="text-align: right;">0.27</td>
</tr>
</tbody>
</table>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb10"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html">prop.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/xtabs.html">xtabs</a></span><span class="op">(</span><span class="op">~</span><span class="va">refClass</span><span class="op">+</span><span class="va">state</span>,<span class="va">s1</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">CAL</th>
<th style="text-align: right;">COL</th>
<th style="text-align: right;">MASS</th>
<th style="text-align: right;">TEX</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">kWh</td>
<td style="text-align: right;">0.08</td>
<td style="text-align: right;">0.08</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: right;">0.09</td>
</tr>
<tr class="even">
<td style="text-align: left;">Percentage</td>
<td style="text-align: right;">0.08</td>
<td style="text-align: right;">0.06</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: right;">0.06</td>
</tr>
<tr class="odd">
<td style="text-align: left;">USD</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: right;">0.10</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: right;">0.10</td>
</tr>
</tbody>
</table>
</div>
</div>
<section id="study-2---subject-counts" class="level3"><h3 class="anchored" data-anchor-id="study-2---subject-counts">Study 2 - Subject counts</h3>
<div class="cell">
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb11"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">s2_long</span> <span class="op">|&gt;</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">refClass</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">rename</span><span class="op">(</span><span class="st">"Reference Class"</span> <span class="op">=</span> <span class="va">refClass</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span>n<span class="op">=</span><span class="fu">n_distinct</span><span class="op">(</span><span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Study 2: Number of unique IDs per condition"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
----------------------
 Reference Class   n  
----------------- ----
   Percentage      69 

       USD         58 

       kWh         69 
----------------------

Table: Study 2: Number of unique IDs per condition</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb13"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">s2_long</span> <span class="op">|&gt;</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">refClass</span>,<span class="va">calc</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">rename</span><span class="op">(</span><span class="st">"Reference Class"</span> <span class="op">=</span> <span class="va">refClass</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>calc<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span><span class="va">calc</span><span class="op">==</span><span class="st">"Calculator"</span> <span class="op">~</span> <span class="st">"Used Calculator"</span>,</span>
<span>                        <span class="va">calc</span><span class="op">==</span><span class="st">"No Calculator"</span> <span class="op">~</span> <span class="st">"No Calculator"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span>n<span class="op">=</span><span class="fu">n_distinct</span><span class="op">(</span><span class="va">id</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">pivot_wider</span><span class="op">(</span>names_from<span class="op">=</span><span class="va">calc</span>,values_from<span class="op">=</span><span class="va">n</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Study 2: Number of unique IDs per condition by calculator use"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
---------------------------------------------------
 Reference Class   No Calculator   Used Calculator 
----------------- --------------- -----------------
   Percentage           11               58        

       USD              12               46        

       kWh              12               57        
---------------------------------------------------

Table: Study 2: Number of unique IDs per condition by calculator use</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb15"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html">prop.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/xtabs.html">xtabs</a></span><span class="op">(</span><span class="op">~</span><span class="va">refClass</span>,<span class="va">s2_long</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">refClass</th>
<th style="text-align: right;">Freq</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">kWh</td>
<td style="text-align: right;">0.35</td>
</tr>
<tr class="even">
<td style="text-align: left;">Percentage</td>
<td style="text-align: right;">0.35</td>
</tr>
<tr class="odd">
<td style="text-align: left;">USD</td>
<td style="text-align: right;">0.30</td>
</tr>
</tbody>
</table>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb16"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html">prop.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/xtabs.html">xtabs</a></span><span class="op">(</span><span class="op">~</span><span class="va">refClass</span><span class="op">+</span><span class="va">state</span>,<span class="va">s2_long</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>            state
refClass     California Colorado Massachusetts Texas
  kWh             0.089    0.102         0.074 0.087
  Percentage      0.089    0.084         0.092 0.087
  USD             0.079    0.069         0.079 0.069</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb18"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/proportions.html">prop.table</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/xtabs.html">xtabs</a></span><span class="op">(</span><span class="op">~</span><span class="va">refClass</span><span class="op">+</span><span class="va">calc</span>,</span>
<span><span class="va">s2_long</span> <span class="op">|&gt;</span> <span class="fu">mutate</span><span class="op">(</span>calc<span class="op">=</span><span class="fu">case_when</span><span class="op">(</span><span class="va">calc</span><span class="op">==</span><span class="st">"Calculator"</span> <span class="op">~</span> <span class="st">"Used Calculator"</span>,</span>
<span>                      <span class="va">calc</span><span class="op">==</span><span class="st">"No Calculator"</span> <span class="op">~</span> <span class="st">"No Calculator"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">kable</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;"></th>
<th style="text-align: right;">No Calculator</th>
<th style="text-align: right;">Used Calculator</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">kWh</td>
<td style="text-align: right;">0.06</td>
<td style="text-align: right;">0.29</td>
</tr>
<tr class="even">
<td style="text-align: left;">Percentage</td>
<td style="text-align: right;">0.06</td>
<td style="text-align: right;">0.30</td>
</tr>
<tr class="odd">
<td style="text-align: left;">USD</td>
<td style="text-align: right;">0.06</td>
<td style="text-align: right;">0.23</td>
</tr>
</tbody>
</table>
</div>
</div>
</section><section id="performance" class="level2"><h2 class="anchored" data-anchor-id="performance">Performance</h2>
<section id="study-1" class="level3"><h3 class="anchored" data-anchor-id="study-1">Study 1</h3>
<div class="cell">
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb19"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">s1_agg</span> <span class="op">&lt;-</span> <span class="va">s1</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">appliance</span> <span class="op">!=</span><span class="st">"Total kWh"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">id</span>,<span class="va">refClass</span>,<span class="va">state</span>,<span class="va">block</span>,<span class="va">plan</span>,<span class="va">calc</span>,<span class="va">edu</span>,<span class="va">pct_goal</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">summarise</span><span class="op">(</span>total_kWh <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span>,orig_kWh<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">family</span><span class="op">)</span>, </span>
<span>                pct_change <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="op">(</span><span class="va">orig_kWh</span><span class="op">-</span><span class="va">total_kWh</span><span class="op">)</span><span class="op">/</span><span class="va">orig_kWh</span>,<span class="fl">3</span><span class="op">)</span>, </span>
<span>                n_change <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">value</span><span class="op">!=</span><span class="va">family</span><span class="op">)</span>,</span>
<span>                state_p_dif<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">state_p_dif</span><span class="op">)</span>,</span>
<span>                state_f_dif<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">state_f_dif</span><span class="op">)</span>,</span>
<span>                n_less_avg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">less_avg</span><span class="op">)</span>,</span>
<span>                duration<span class="op">=</span><span class="fu">first</span><span class="op">(</span><span class="va">Duration__in_seconds_</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>matched_goal <span class="op">=</span> <span class="op">(</span><span class="va">pct_change</span> <span class="op">==</span> <span class="va">pct_goal</span><span class="op">)</span>, </span>
<span>                error <span class="op">=</span> <span class="va">pct_change</span> <span class="op">-</span> <span class="va">pct_goal</span>,</span>
<span>                abs_error <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">error</span><span class="op">)</span>,</span>
<span>                close_match <span class="op">=</span> <span class="va">abs_error</span> <span class="op">&lt;=</span> <span class="fl">0.03</span><span class="op">)</span></span>
<span></span>
<span><span class="va">s1_agg4</span> <span class="op">&lt;-</span> <span class="va">s1_agg</span> <span class="op">|&gt;</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">id</span>,<span class="va">refClass</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">summarise</span><span class="op">(</span>mg<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">matched_goal</span><span class="op">)</span>,n<span class="op">=</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span>, pct<span class="op">=</span><span class="va">mg</span><span class="op">/</span><span class="va">n</span><span class="op">)</span> </span>
<span></span>
<span></span>
<span><span class="co"># overall pct of subjects who matched their goal</span></span>
<span><span class="va">s1_agg4</span> <span class="op">|&gt;</span> <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    se<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Study 1: Proportion of participants who matched their goal overall"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
---------------------------------
  mean      sd      n      se    
-------- -------- ----- ---------
 0.2255   0.3814   235   0.02488 
---------------------------------

Table: Study 1: Proportion of participants who matched their goal overall</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb21"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># proportion matching vs close match</span></span>
<span></span>
<span><span class="va">s1_agg</span> <span class="op">|&gt;</span> <span class="fu">pivot_longer</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">matched_goal</span>,<span class="va">close_match</span><span class="op">)</span>,names_to<span class="op">=</span><span class="st">"match_type"</span>,values_to<span class="op">=</span><span class="st">"match"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">id</span>,<span class="va">match_type</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span>mg<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">match</span><span class="op">)</span>,n<span class="op">=</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span>, pct<span class="op">=</span><span class="va">mg</span><span class="op">/</span><span class="va">n</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">match_type</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    se<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Study 1: Proportion of participants who matched their goal or were within 3% of their goal"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
------------------------------------------------
  match_type     mean      sd      n      se    
-------------- -------- -------- ----- ---------
 close_match    0.4149   0.4182   235   0.02728 

 matched_goal   0.2255   0.3814   235   0.02488 
------------------------------------------------

Table: Study 1: Proportion of participants who matched their goal or were within 3% of their goal</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb23"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># refClass</span></span>
<span><span class="va">s1_agg4</span> <span class="op">|&gt;</span> </span>
<span><span class="fu">group_by</span><span class="op">(</span><span class="va">refClass</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span><span class="fu">summarise</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    se<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Study 1: Proportion of participants who matched their goal by condition"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
----------------------------------------------
  refClass     mean       sd     n      se    
------------ --------- -------- ---- ---------
 Percentage   0.2206    0.3679   68   0.04461 

    USD       0.09831   0.2734   89   0.02898 

    kWh        0.375    0.4446   78   0.05034 
----------------------------------------------

Table: Study 1: Proportion of participants who matched their goal by condition</code></pre>
</div>
</div>
</section><section id="study-2" class="level3"><h3 class="anchored" data-anchor-id="study-2">Study 2</h3>
<div class="cell">
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb25"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">s2_agg1</span> <span class="op">&lt;-</span> <span class="va">s2_long</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">appliance</span> <span class="op">!=</span> <span class="st">"TOTAL"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">id</span>, <span class="va">state</span>,<span class="va">refClass</span>,<span class="va">pct</span>,<span class="va">pct_goal</span>,<span class="va">plan</span>,<span class="va">rounded</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span></span>
<span>    total_kWh <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span>,</span>
<span>    orig_kWh <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">family</span><span class="op">)</span>,</span>
<span>    pct_change <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="op">(</span><span class="va">orig_kWh</span> <span class="op">-</span> <span class="va">total_kWh</span><span class="op">)</span> <span class="op">/</span> <span class="va">orig_kWh</span>, <span class="fl">3</span><span class="op">)</span>,</span>
<span>    state_dif <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">state_dif</span><span class="op">)</span>,</span>
<span>    .groups <span class="op">=</span> <span class="st">"drop"</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span>matched_goal <span class="op">=</span> <span class="op">(</span><span class="va">pct_change</span> <span class="op">==</span> <span class="va">pct</span><span class="op">)</span>,</span>
<span>  close_match <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">pct_change</span><span class="op">-</span><span class="va">pct</span><span class="op">)</span><span class="op">&lt;</span><span class="fl">.03</span><span class="op">)</span></span>
<span></span>
<span><span class="va">s2_agg4</span> <span class="op">&lt;-</span> <span class="va">s2_agg1</span><span class="op">|&gt;</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">id</span>,<span class="va">refClass</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>mg<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">matched_goal</span><span class="op">)</span>,n<span class="op">=</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span>, pct<span class="op">=</span><span class="va">mg</span><span class="op">/</span><span class="va">n</span><span class="op">)</span> </span>
<span></span>
<span></span>
<span><span class="co"># overall pct of subjects who matched their goal</span></span>
<span><span class="va">s2_agg4</span> <span class="op">|&gt;</span> <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    se<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Study 2: Proportion of participants who matched their goal overall"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
---------------------------------
  mean      sd      n      se    
-------- -------- ----- ---------
 0.3023   0.4092   196   0.02923 
---------------------------------

Table: Study 2: Proportion of participants who matched their goal overall</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb27"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># proportion matching vs close match</span></span>
<span></span>
<span><span class="va">s2_agg1</span> <span class="op">|&gt;</span> <span class="fu">pivot_longer</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">matched_goal</span>,<span class="va">close_match</span><span class="op">)</span>,names_to<span class="op">=</span><span class="st">"match_type"</span>,values_to<span class="op">=</span><span class="st">"match"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">id</span>,<span class="va">match_type</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span>mg<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">match</span><span class="op">)</span>,n<span class="op">=</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span>, pct<span class="op">=</span><span class="va">mg</span><span class="op">/</span><span class="va">n</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">match_type</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    se<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Study 2: Proportion of participants who matched their goal or were within 3% of their goal"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
------------------------------------------------
  match_type     mean      sd      n      se    
-------------- -------- -------- ----- ---------
 close_match    0.4273   0.438    196   0.03128 

 matched_goal   0.3023   0.4092   196   0.02923 
------------------------------------------------

Table: Study 2: Proportion of participants who matched their goal or were within 3% of their goal</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb29"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># refClass only </span></span>
<span><span class="va">s2_agg4</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">refClass</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">summarise</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    se<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Study 2: Proportion of participants who matched their goal by condition"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
---------------------------------------------
  refClass     mean      sd     n      se    
------------ -------- -------- ---- ---------
 Percentage   0.2681   0.3621   69   0.04359 

    USD       0.1853   0.3763   58   0.04941 

    kWh       0.4348   0.4469   69   0.0538  
---------------------------------------------

Table: Study 2: Proportion of participants who matched their goal by condition</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb31"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># rounded only</span></span>
<span></span>
<span><span class="va">s2_agg1</span> <span class="op">|&gt;</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">id</span>,<span class="va">rounded</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>mg<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">matched_goal</span><span class="op">)</span>,n<span class="op">=</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span>, pct<span class="op">=</span><span class="va">mg</span><span class="op">/</span><span class="va">n</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">rounded</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    se<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Study 2: Proportion of participants who matched their goal by rounding condition"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
-----------------------------------------------
   rounded      mean      sd      n      se    
------------- -------- -------- ----- ---------
 Not Rounded   0.2653   0.4219   196   0.03013 

   Rounded     0.3393   0.454    196   0.03243 
-----------------------------------------------

Table: Study 2: Proportion of participants who matched their goal by rounding condition</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb33"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># pct_goal only</span></span>
<span></span>
<span><span class="va">s2_agg1</span> <span class="op">|&gt;</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">id</span>,<span class="va">pct_goal</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>mg<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">matched_goal</span><span class="op">)</span>,n<span class="op">=</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span>, pct<span class="op">=</span><span class="va">mg</span><span class="op">/</span><span class="va">n</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">pct_goal</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    se<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Study 2: Proportion of participants who matched their goal by goal condition"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
--------------------------------------------
 pct_goal    mean      sd      n      se    
---------- -------- -------- ----- ---------
   10%      0.2959   0.4405   196   0.03146 

   15%      0.3087   0.439    196   0.03135 
--------------------------------------------

Table: Study 2: Proportion of participants who matched their goal by goal condition</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb35"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># refClass x rounded</span></span>
<span></span>
<span><span class="va">s2_agg1</span> <span class="op">|&gt;</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">id</span>, <span class="va">refClass</span>,<span class="va">rounded</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>mg<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">matched_goal</span><span class="op">)</span>,n<span class="op">=</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span>, pct<span class="op">=</span><span class="va">mg</span><span class="op">/</span><span class="va">n</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">refClass</span>,<span class="va">rounded</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    se<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Study 2: Proportion of participants who matched their goal by condition and rounding"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
-----------------------------------------------------------
  refClass      rounded      mean      sd     n      se    
------------ ------------- -------- -------- ---- ---------
 Percentage   Not Rounded   0.1957   0.3856   69   0.04642 

 Percentage     Rounded     0.3406   0.4496   69   0.05413 

    USD       Not Rounded   0.1897   0.3842   58   0.05045 

    USD         Rounded     0.181    0.3827   58   0.05025 

    kWh       Not Rounded   0.3986   0.4584   69   0.05519 

    kWh         Rounded     0.471    0.4765   69   0.05737 
-----------------------------------------------------------

Table: Study 2: Proportion of participants who matched their goal by condition and rounding</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb37"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># refClass x pct_goal</span></span>
<span></span>
<span><span class="va">s2_agg1</span> <span class="op">|&gt;</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">id</span>, <span class="va">refClass</span>,<span class="va">pct_goal</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>mg<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">matched_goal</span><span class="op">)</span>,n<span class="op">=</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span>, pct<span class="op">=</span><span class="va">mg</span><span class="op">/</span><span class="va">n</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">refClass</span>,<span class="va">pct_goal</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    se<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Study 2: Proportion of participants who matched their goal by condition and goal"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
--------------------------------------------------------
  refClass    pct_goal    mean      sd     n      se    
------------ ---------- -------- -------- ---- ---------
 Percentage     10%      0.2536   0.4168   69   0.05017 

 Percentage     15%      0.2826   0.4328   69   0.05211 

    USD         10%      0.1724   0.3693   58   0.0485  

    USD         15%      0.1983   0.3967   58   0.05209 

    kWh         10%      0.442    0.4815   69   0.05797 

    kWh         15%      0.4275   0.456    69   0.05489 
--------------------------------------------------------

Table: Study 2: Proportion of participants who matched their goal by condition and goal</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb39"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># pct_goal x rounded</span></span>
<span></span>
<span><span class="va">s2_agg1</span> <span class="op">|&gt;</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">id</span>, <span class="va">pct_goal</span>,<span class="va">rounded</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>mg<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">matched_goal</span><span class="op">)</span>,n<span class="op">=</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span>, pct<span class="op">=</span><span class="va">mg</span><span class="op">/</span><span class="va">n</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">pct_goal</span>,<span class="va">rounded</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    se<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Study 2: Proportion of participants who matched their goal by goal and rounding"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
----------------------------------------------------------
 pct_goal     rounded      mean      sd      n      se    
---------- ------------- -------- -------- ----- ---------
   10%      Not Rounded   0.2188   0.3961   96    0.04043 

   10%        Rounded      0.37    0.4694   100   0.04694 

   15%      Not Rounded    0.31    0.4426   100   0.04426 

   15%        Rounded     0.3073   0.4375   96    0.04465 
----------------------------------------------------------

Table: Study 2: Proportion of participants who matched their goal by goal and rounding</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb41"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># pct_goal x rounded x refClass</span></span>
<span></span>
<span><span class="va">s2_agg1</span> <span class="op">|&gt;</span> <span class="fu">group_by</span><span class="op">(</span><span class="va">id</span>, <span class="va">pct_goal</span>,<span class="va">rounded</span>,<span class="va">refClass</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">summarise</span><span class="op">(</span>mg<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">matched_goal</span><span class="op">)</span>,n<span class="op">=</span><span class="fu">n</span><span class="op">(</span><span class="op">)</span>, pct<span class="op">=</span><span class="va">mg</span><span class="op">/</span><span class="va">n</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">pct_goal</span>,<span class="va">rounded</span>,<span class="va">refClass</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span></span>
<span>    mean <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    sd <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span>,</span>
<span>    n <span class="op">=</span> <span class="fu">n</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    se<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/stats/sd.html">sd</a></span><span class="op">(</span><span class="va">pct</span><span class="op">)</span><span class="op">/</span><span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">sqrt</a></span><span class="op">(</span><span class="va">n</span><span class="op">)</span></span>
<span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Study 2: Proportion of participants who matched their goal by goal, rounding, and condition"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
----------------------------------------------------------------------
 pct_goal     rounded      refClass     mean      sd     n      se    
---------- ------------- ------------ -------- -------- ---- ---------
   10%      Not Rounded   Percentage   0.1111   0.2955   36   0.04924 

   10%      Not Rounded      USD       0.1333   0.3198   30   0.05839 

   10%      Not Rounded      kWh       0.4333   0.4866   30   0.08884 

   10%        Rounded     Percentage   0.4091   0.4752   33   0.08273 

   10%        Rounded        USD       0.2143   0.4179   28   0.07897 

   10%        Rounded        kWh       0.4487   0.4839   39   0.07748 

   15%      Not Rounded   Percentage   0.2879   0.4512   33   0.07855 

   15%      Not Rounded      USD        0.25    0.441    28   0.08333 

   15%      Not Rounded      kWh       0.3718   0.4401   39   0.07047 

   15%        Rounded     Percentage   0.2778   0.4216   36   0.07027 

   15%        Rounded        USD        0.15    0.3511   30   0.0641  

   15%        Rounded        kWh        0.5     0.4734   30   0.08644 
----------------------------------------------------------------------

Table: Study 2: Proportion of participants who matched their goal by goal, rounding, and condition</code></pre>
</div>
</div>
</section></section><section id="analysis" class="level2"><h2 class="anchored" data-anchor-id="analysis">Analysis</h2>
<section id="study-1-1" class="level3"><h3 class="anchored" data-anchor-id="study-1-1">Study 1</h3>
<div class="cell">
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb43"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># binomial regression on trial level data</span></span>
<span></span>
<span><span class="va">s1_br</span> <span class="op">&lt;-</span> <span class="fu">brm</span><span class="op">(</span></span>
<span>    <span class="va">matched_goal</span> <span class="op">~</span> <span class="va">refClass</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span><span class="op">|</span><span class="va">id</span><span class="op">)</span>,</span>
<span>    data <span class="op">=</span> <span class="va">s1_agg</span>,</span>
<span>    family <span class="op">=</span> <span class="fu">bernoulli</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    cores<span class="op">=</span><span class="fl">4</span>,</span>
<span>    iter<span class="op">=</span><span class="fl">2000</span>,</span>
<span>    control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>adapt_delta <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span>,</span>
<span>    file<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/model_cache"</span>,<span class="st">'s1_br.rds'</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">s1_br</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code> Family: bernoulli 
  Links: mu = logit 
Formula: matched_goal ~ refClass + (1 | id) 
   Data: s1_agg (Number of observations: 940) 
  Draws: 4 chains, each with iter = 2000; warmup = 1000; thin = 1;
         total post-warmup draws = 4000

Multilevel Hyperparameters:
~id (Number of levels: 235) 
              Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS
sd(Intercept)     7.19      1.18     5.22     9.83 1.00     1100     1777

Regression Coefficients:
                   Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS
Intercept             -2.31      1.05    -4.59    -0.41 1.00      851     1367
refClassPercentage    -3.16      1.60    -6.49    -0.13 1.00      721     1194
refClassUSD           -7.25      1.90   -11.50    -3.92 1.00      895     1244

Draws were sampled using sampling(NUTS). For each parameter, Bulk_ESS
and Tail_ESS are effective sample size measures, and Rhat is the potential
scale reduction factor on split chains (at convergence, Rhat = 1).</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb45"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mr_s1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="fu">describe_posterior</span><span class="op">(</span><span class="va">s1_br</span>, centrality <span class="op">=</span> <span class="st">"Mean"</span><span class="op">)</span><span class="op">)</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">mr_s1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Term"</span>, <span class="st">"Estimate"</span>,<span class="st">"95% CrI Lower"</span>, <span class="st">"95% CrI Upper"</span>, <span class="st">"pd"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">intercept</span> <span class="op">&lt;-</span> <span class="va">mr_s1</span><span class="op">$</span><span class="va">Estimate</span><span class="op">[</span><span class="va">mr_s1</span><span class="op">$</span><span class="va">Term</span> <span class="op">==</span> <span class="st">"b_Intercept"</span><span class="op">]</span></span>
<span></span>
<span> <span class="va">mr_s1</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>Term <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html">str_remove</a></span><span class="op">(</span><span class="va">Term</span>, <span class="st">"b_"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Estimate"</span>, <span class="st">"95% CrI Lower"</span>, <span class="st">"95% CrI Upper"</span><span class="op">)</span>, </span>
<span>                    \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu">if_else</span><span class="op">(</span><span class="va">Term</span> <span class="op">==</span> <span class="st">"Intercept"</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html">plogis</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/Logistic.html">plogis</a></span><span class="op">(</span><span class="va">x</span> <span class="op">+</span> <span class="va">intercept</span><span class="op">)</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>Term <span class="op">=</span> <span class="fu">if_else</span><span class="op">(</span><span class="va">Term</span> <span class="op">==</span> <span class="st">"Intercept"</span>, <span class="st">"Intercept (kWh)"</span>, <span class="va">Term</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html">remove_rownames</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">kable</span><span class="op">(</span>booktabs <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">Term</th>
<th style="text-align: right;">Estimate</th>
<th style="text-align: right;">95% CrI Lower</th>
<th style="text-align: right;">95% CrI Upper</th>
<th style="text-align: right;">pd</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Intercept (kWh)</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: right;">0.01</td>
<td style="text-align: right;">0.40</td>
<td style="text-align: right;">0.99</td>
</tr>
<tr class="even">
<td style="text-align: left;">refClassPercentage</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.08</td>
<td style="text-align: right;">0.98</td>
</tr>
<tr class="odd">
<td style="text-align: left;">refClassUSD</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">0.00</td>
<td style="text-align: right;">1.00</td>
</tr>
</tbody>
</table>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb46"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">s1_br2</span> <span class="op">&lt;-</span> <span class="fu">brm</span><span class="op">(</span></span>
<span>    <span class="va">close_match</span> <span class="op">~</span> <span class="va">refClass</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span><span class="op">|</span><span class="va">id</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span><span class="op">|</span><span class="va">state</span><span class="op">)</span>,</span>
<span>    data <span class="op">=</span> <span class="va">s1_agg</span>,</span>
<span>    family <span class="op">=</span> <span class="fu">bernoulli</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    cores<span class="op">=</span><span class="fl">4</span>,</span>
<span>    iter<span class="op">=</span><span class="fl">2000</span>,</span>
<span>    control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>adapt_delta <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span>,</span>
<span>    file<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/model_cache"</span>,<span class="st">'s1_br2.rds'</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">s1_br2</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code> Family: bernoulli 
  Links: mu = logit 
Formula: close_match ~ refClass + (1 | id) + (1 | state) 
   Data: s1_agg (Number of observations: 940) 
  Draws: 4 chains, each with iter = 2000; warmup = 1000; thin = 1;
         total post-warmup draws = 4000

Multilevel Hyperparameters:
~id (Number of levels: 235) 
              Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS
sd(Intercept)     3.88      0.43     3.12     4.79 1.00      963     2098

~state (Number of levels: 4) 
              Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS
sd(Intercept)     0.42      0.44     0.02     1.51 1.00     1494     2007

Regression Coefficients:
                   Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS
Intercept              0.62      0.59    -0.55     1.80 1.01     1001     1167
refClassPercentage    -0.90      0.76    -2.43     0.49 1.01      737     1299
refClassUSD           -3.17      0.78    -4.80    -1.70 1.01     1083     1559

Draws were sampled using sampling(NUTS). For each parameter, Bulk_ESS
and Tail_ESS are effective sample size measures, and Rhat is the potential
scale reduction factor on split chains (at convergence, Rhat = 1).</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb48"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">s1_br2</span> <span class="op">|&gt;</span> <span class="fu">emmeans</span><span class="op">(</span><span class="op">~</span><span class="va">refClass</span>, type<span class="op">=</span><span class="st">"response"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code> refClass   response lower.HPD upper.HPD
 kWh            0.65      0.40      0.89
 Percentage     0.43      0.17      0.69
 USD            0.07      0.01      0.17

Point estimate displayed: median 
Results are back-transformed from the logit scale 
HPD interval probability: 0.95 </code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb50"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">s1_agg</span> <span class="op">&lt;-</span> <span class="va">s1</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">appliance</span> <span class="op">!=</span><span class="st">"Total kWh"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">id</span>,<span class="va">refClass</span>,<span class="va">state</span>,<span class="va">block</span>,<span class="va">plan</span>,<span class="va">calc</span>,<span class="va">edu</span>,<span class="va">pct_goal</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">summarise</span><span class="op">(</span>total_kWh <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span>,orig_kWh<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">family</span><span class="op">)</span>, </span>
<span>                pct_change <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="op">(</span><span class="va">orig_kWh</span><span class="op">-</span><span class="va">total_kWh</span><span class="op">)</span><span class="op">/</span><span class="va">orig_kWh</span>,<span class="fl">3</span><span class="op">)</span>, </span>
<span>                n_change <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">value</span><span class="op">!=</span><span class="va">family</span><span class="op">)</span>,</span>
<span>                state_p_dif<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">state_p_dif</span><span class="op">)</span>,</span>
<span>                state_f_dif<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">state_f_dif</span><span class="op">)</span>,</span>
<span>                n_less_avg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">less_avg</span><span class="op">)</span>,</span>
<span>                duration<span class="op">=</span><span class="fu">first</span><span class="op">(</span><span class="va">Duration__in_seconds_</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>matched_goal <span class="op">=</span> <span class="op">(</span><span class="va">pct_change</span> <span class="op">==</span> <span class="va">pct_goal</span><span class="op">)</span>, </span>
<span>                error <span class="op">=</span> <span class="va">pct_change</span> <span class="op">-</span> <span class="va">pct_goal</span>,</span>
<span>                abs_error <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">error</span><span class="op">)</span>,</span>
<span>                close_match <span class="op">=</span> <span class="va">abs_error</span> <span class="op">&lt;=</span> <span class="fl">0.03</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># Add ungroup here</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span></span>
<span>        accuracy_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span></span>
<span>            <span class="fu">case_when</span><span class="op">(</span></span>
<span>                <span class="va">abs_error</span> <span class="op">&lt;=</span> <span class="fl">0.01</span> <span class="op">~</span> <span class="st">"1% or less"</span>,</span>
<span>                <span class="va">abs_error</span> <span class="op">&lt;=</span> <span class="fl">0.05</span> <span class="op">~</span> <span class="st">"5% or less"</span>,</span>
<span>                <span class="va">abs_error</span> <span class="op">&lt;=</span> <span class="fl">0.10</span> <span class="op">~</span> <span class="st">"10% or less"</span>,</span>
<span>                <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Greater than 10%"</span>  <span class="co"># Capture all remaining cases</span></span>
<span>            <span class="op">)</span>, </span>
<span>            levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"1% or less"</span>, <span class="st">"5% or less"</span>, <span class="st">"10% or less"</span>, <span class="st">"Greater than 10%"</span><span class="op">)</span>,</span>
<span>            ordered <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details>
</div>
</section></section><section id="ordinal-regression-alternative" class="level2"><h2 class="anchored" data-anchor-id="ordinal-regression-alternative">Ordinal Regression alternative</h2>
<div class="cell">
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb51"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">s1_agg</span> <span class="op">&lt;-</span> <span class="va">s1</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu"><a href="https://rdrr.io/r/stats/filter.html">filter</a></span><span class="op">(</span><span class="va">appliance</span> <span class="op">!=</span><span class="st">"Total kWh"</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">id</span>,<span class="va">refClass</span>,<span class="va">state</span>,<span class="va">block</span>,<span class="va">plan</span>,<span class="va">calc</span>,<span class="va">edu</span>,<span class="va">pct_goal</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">summarise</span><span class="op">(</span>total_kWh <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">value</span><span class="op">)</span>,orig_kWh<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">family</span><span class="op">)</span>, </span>
<span>                pct_change <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="op">(</span><span class="va">orig_kWh</span><span class="op">-</span><span class="va">total_kWh</span><span class="op">)</span><span class="op">/</span><span class="va">orig_kWh</span>,<span class="fl">3</span><span class="op">)</span>, </span>
<span>                n_change <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">value</span><span class="op">!=</span><span class="va">family</span><span class="op">)</span>,</span>
<span>                state_p_dif<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">state_p_dif</span><span class="op">)</span>,</span>
<span>                state_f_dif<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">state_f_dif</span><span class="op">)</span>,</span>
<span>                n_less_avg <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/sum.html">sum</a></span><span class="op">(</span><span class="va">less_avg</span><span class="op">)</span>,</span>
<span>                duration<span class="op">=</span><span class="fu">first</span><span class="op">(</span><span class="va">Duration__in_seconds_</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>    <span class="fu">mutate</span><span class="op">(</span>matched_goal <span class="op">=</span> <span class="op">(</span><span class="va">pct_change</span> <span class="op">==</span> <span class="va">pct_goal</span><span class="op">)</span>, </span>
<span>                error <span class="op">=</span> <span class="va">pct_change</span> <span class="op">-</span> <span class="va">pct_goal</span>,</span>
<span>                abs_error <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/MathFun.html">abs</a></span><span class="op">(</span><span class="va">error</span><span class="op">)</span>,</span>
<span>                close_match <span class="op">=</span> <span class="va">abs_error</span> <span class="op">&lt;=</span> <span class="fl">0.03</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">ungroup</span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="co"># Add ungroup here</span></span>
<span>        <span class="fu">mutate</span><span class="op">(</span></span>
<span>            accuracy_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span></span>
<span>                <span class="fu">case_when</span><span class="op">(</span></span>
<span>                    <span class="va">abs_error</span> <span class="op">==</span> <span class="fl">0.00</span> <span class="op">~</span> <span class="st">"Exact match"</span>,</span>
<span>                    <span class="va">abs_error</span> <span class="op">&lt;=</span> <span class="fl">0.02</span> <span class="op">~</span> <span class="st">"0.01-2% error"</span>,</span>
<span>                    <span class="va">abs_error</span> <span class="op">&lt;=</span> <span class="fl">0.10</span> <span class="op">~</span> <span class="st">"2.01-15% error"</span>,</span>
<span>                    <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Over 15% error"</span>  <span class="co"># Capture all remaining cases</span></span>
<span>                <span class="op">)</span>, </span>
<span>                levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Exact match"</span>, <span class="st">"0.01-2% error"</span>, <span class="st">"2.01-15% error"</span>, <span class="st">"Over 15% error"</span><span class="op">)</span>,</span>
<span>                ordered <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>            <span class="op">)</span></span>
<span>        <span class="op">)</span></span>
<span>    <span class="co"># mutate(</span></span>
<span>    <span class="co">#     accuracy_level = factor(</span></span>
<span>    <span class="co">#         case_when(</span></span>
<span>    <span class="co">#             abs_error &lt;= 0.01 ~ "1% or less",</span></span>
<span>    <span class="co">#             abs_error &lt;= 0.05 ~ "5% or less",</span></span>
<span>    <span class="co">#             abs_error &lt;= 0.10 ~ "10% or less",</span></span>
<span>    <span class="co">#             TRUE ~ "Greater than 10%"  # Capture all remaining cases</span></span>
<span>    <span class="co">#         ), </span></span>
<span>    <span class="co">#         levels = c("1% or less", "5% or less", "10% or less", "Greater than 10%"),</span></span>
<span>    <span class="co">#         ordered = TRUE</span></span>
<span>    <span class="co">#     )</span></span>
<span>    <span class="co"># )</span></span>
<span></span>
<span><span class="co"># plot accuracy level by refClass</span></span>
<span></span>
<span><span class="va">s1_agg</span> <span class="op">|&gt;</span> </span>
<span>        <span class="fu">mutate</span><span class="op">(</span></span>
<span>            accuracy_level <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html">factor</a></span><span class="op">(</span></span>
<span>                <span class="fu">case_when</span><span class="op">(</span></span>
<span>                    <span class="va">abs_error</span> <span class="op">==</span> <span class="fl">0.00</span> <span class="op">~</span> <span class="st">"Exact match"</span>,</span>
<span>                    <span class="va">abs_error</span> <span class="op">&lt;=</span> <span class="fl">0.02</span> <span class="op">~</span> <span class="st">"0.01-2% error"</span>,</span>
<span>                    <span class="va">abs_error</span> <span class="op">&lt;=</span> <span class="fl">0.10</span> <span class="op">~</span> <span class="st">"2.01-15% error"</span>,</span>
<span>                    <span class="cn">TRUE</span> <span class="op">~</span> <span class="st">"Over 15% error"</span>  <span class="co"># Capture all remaining cases</span></span>
<span>                <span class="op">)</span>, </span>
<span>                levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Exact match"</span>, <span class="st">"0.01-2% error"</span>, <span class="st">"2.01-15% error"</span>, <span class="st">"Over 15% error"</span><span class="op">)</span>,</span>
<span>                ordered <span class="op">=</span> <span class="cn">TRUE</span></span>
<span>            <span class="op">)</span></span>
<span>        <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">ggplot</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>x<span class="op">=</span><span class="va">refClass</span>,fill<span class="op">=</span><span class="va">accuracy_level</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">geom_bar</span><span class="op">(</span>position<span class="op">=</span><span class="st">"fill"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">labs</span><span class="op">(</span>title<span class="op">=</span><span class="st">"Study 1: Accuracy Level by Reference Class"</span>,</span>
<span>        x<span class="op">=</span><span class="st">"Reference Class"</span>,</span>
<span>        y<span class="op">=</span><span class="st">"Proportion"</span>,</span>
<span>        fill<span class="op">=</span><span class="st">"Accuracy Level"</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>    <span class="fu">theme</span><span class="op">(</span>axis.text.x <span class="op">=</span> <span class="fu">element_text</span><span class="op">(</span>angle <span class="op">=</span> <span class="fl">45</span>, hjust <span class="op">=</span> <span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><a href="overview_files/figure-html/unnamed-chunk-7-1.png" class="lightbox" data-gallery="quarto-lightbox-gallery-1"><img src="overview_files/figure-html/unnamed-chunk-7-1.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb52"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">ordinal_model_s1</span> <span class="op">&lt;-</span> <span class="fu">brm</span><span class="op">(</span></span>
<span>  <span class="va">accuracy_level</span> <span class="op">~</span> <span class="va">refClass</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span><span class="op">|</span><span class="va">id</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span><span class="op">|</span><span class="va">state</span><span class="op">)</span>,</span>
<span>  data <span class="op">=</span> <span class="va">s1_agg</span>,</span>
<span>  family <span class="op">=</span> <span class="fu">cumulative</span><span class="op">(</span><span class="st">"logit"</span><span class="op">)</span>,</span>
<span>  cores <span class="op">=</span> <span class="fl">4</span>,</span>
<span>  iter <span class="op">=</span> <span class="fl">2000</span>,</span>
<span>  control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>adapt_delta <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span>, <span class="co"># Recommended for ordinal models</span></span>
<span>  prior <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu">prior</span><span class="op">(</span><span class="fu">normal</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">2</span><span class="op">)</span>, class <span class="op">=</span> <span class="st">"Intercept"</span><span class="op">)</span>,  <span class="co"># Priors for thresholds</span></span>
<span>            <span class="fu">prior</span><span class="op">(</span><span class="fu">normal</span><span class="op">(</span><span class="fl">0</span>, <span class="fl">1.5</span><span class="op">)</span>, class <span class="op">=</span> <span class="st">"b"</span><span class="op">)</span><span class="op">)</span>, <span class="co"># Priors for predictors</span></span>
<span>  file <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/model_cache"</span>,<span class="st">'s1_ordinal3.rds'</span><span class="op">)</span><span class="op">)</span> <span class="co"># Cache for efficiency</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">pred_summary</span> <span class="op">&lt;-</span> <span class="va">ordinal_model_s1</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">epred_draws</span><span class="op">(</span>newdata <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span>refClass <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"kWh"</span>, <span class="st">"Percentage"</span>, <span class="st">"USD"</span><span class="op">)</span><span class="op">)</span>,</span>
<span>                ndraws <span class="op">=</span> <span class="fl">1000</span>, re_formula <span class="op">=</span> <span class="cn">NA</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">group_by</span><span class="op">(</span><span class="va">refClass</span>, <span class="va">.category</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">summarise</span><span class="op">(</span></span>
<span>        mean_prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">.epred</span><span class="op">)</span>,</span>
<span>        lower_ci <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">.epred</span>, <span class="fl">0.025</span><span class="op">)</span>,</span>
<span>        upper_ci <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">.epred</span>, <span class="fl">0.975</span><span class="op">)</span></span>
<span>    <span class="op">)</span></span>
<span><span class="va">pred_summary</span> <span class="op">|&gt;</span> <span class="fu">pander</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/pander/man/pandoc.table.return.html">pandoc.table</a></span><span class="op">(</span>caption<span class="op">=</span><span class="st">"Study 1: Predicted probabilities of accuracy level by reference class"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
---------------------------------------------------------------
  refClass      .category      mean_prob   lower_ci   upper_ci 
------------ ---------------- ----------- ---------- ----------
 Percentage    Exact match      0.08465     0.025      0.2104  

 Percentage   0.01-2% error     0.3129      0.1425     0.473   

 Percentage   2.01-15% error    0.4909      0.2915     0.6046  

 Percentage   Over 15% error    0.1116     0.03177     0.2583  

    USD        Exact match      0.01522    0.00424    0.03805  

    USD       0.01-2% error     0.09015    0.03082     0.1967  

    USD       2.01-15% error    0.4855      0.3227     0.6033  

    USD       Over 15% error    0.4091      0.1764     0.6383  

    kWh        Exact match      0.1479     0.05314     0.3178  

    kWh       0.01-2% error     0.4031      0.244      0.5163  

    kWh       2.01-15% error    0.3883      0.1901     0.5721  

    kWh       Over 15% error    0.06076    0.01795     0.1345  
---------------------------------------------------------------

Table: Study 1: Predicted probabilities of accuracy level by reference class</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb54"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="fu">ggplot</span><span class="op">(</span><span class="va">pred_summary</span>, </span>
<span>       <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">refClass</span>, y <span class="op">=</span> <span class="va">mean_prob</span>, fill <span class="op">=</span> <span class="va">.category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_col</span><span class="op">(</span>position <span class="op">=</span> <span class="st">"stack"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_errorbar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">lower_ci</span>, ymax <span class="op">=</span> <span class="va">upper_ci</span><span class="op">)</span>, </span>
<span>                position <span class="op">=</span> <span class="fu">position_stack</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Reference Class"</span>, </span>
<span>       y <span class="op">=</span> <span class="st">"Predicted Probability"</span>,</span>
<span>       fill <span class="op">=</span> <span class="st">"Accuracy Level"</span>,</span>
<span>       title <span class="op">=</span> <span class="st">"Predicted Probabilities of Accuracy Levels by Reference Class"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">scale_fill_brewer</span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Blues"</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><a href="overview_files/figure-html/unnamed-chunk-7-2.png" class="lightbox" data-gallery="quarto-lightbox-gallery-2"><img src="overview_files/figure-html/unnamed-chunk-7-2.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb55"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Calculate cumulative probabilities</span></span>
<span><span class="va">cum_probs</span> <span class="op">&lt;-</span> <span class="va">pred_summary</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">group_by</span><span class="op">(</span><span class="va">refClass</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">arrange</span><span class="op">(</span><span class="va">refClass</span>, <span class="va">.category</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">mutate</span><span class="op">(</span></span>
<span>    cum_prob <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="va">mean_prob</span><span class="op">)</span>,</span>
<span>    cum_lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="va">lower_ci</span><span class="op">)</span>,</span>
<span>    cum_upper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/cumsum.html">cumsum</a></span><span class="op">(</span><span class="va">upper_ci</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">cum_probs</span>, </span>
<span>    <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">refClass</span>, y <span class="op">=</span> <span class="va">cum_prob</span>, color <span class="op">=</span> <span class="va">.category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_point</span><span class="op">(</span>size <span class="op">=</span> <span class="fl">3</span>,position<span class="op">=</span><span class="fu">position_dodge</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">geom_errorbar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">cum_lower</span>, ymax <span class="op">=</span> <span class="va">cum_upper</span><span class="op">)</span>, </span>
<span>            width <span class="op">=</span> <span class="fl">0.2</span>,position<span class="op">=</span><span class="fu">position_dodge</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">labs</span><span class="op">(</span>x <span class="op">=</span> <span class="st">"Reference Class"</span>,</span>
<span>    y <span class="op">=</span> <span class="st">"Cumulative Probability"</span>,</span>
<span>    color <span class="op">=</span> <span class="st">"Accuracy Level"</span>,</span>
<span>    title <span class="op">=</span> <span class="st">"Cumulative Probabilities of Accuracy Levels"</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span><span class="fu">scale_color_brewer</span><span class="op">(</span>palette <span class="op">=</span> <span class="st">"Blues"</span><span class="op">)</span> </span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><a href="overview_files/figure-html/unnamed-chunk-7-3.png" class="lightbox" data-gallery="quarto-lightbox-gallery-3"><img src="overview_files/figure-html/unnamed-chunk-7-3.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb56"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">summary_table</span> <span class="op">&lt;-</span> <span class="va">pred_summary</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">pivot_wider</span><span class="op">(</span></span>
<span>    names_from <span class="op">=</span> <span class="va">.category</span>,</span>
<span>    values_from <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="va">mean_prob</span>, <span class="va">lower_ci</span>, <span class="va">upper_ci</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">kable</span><span class="op">(</span>digits <span class="op">=</span> <span class="fl">3</span><span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/print.html">print</a></span><span class="op">(</span><span class="va">summary_table</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>

|refClass   | mean_prob_Exact match| mean_prob_0.01-2% error| mean_prob_2.01-15% error| mean_prob_Over 15% error| lower_ci_Exact match| lower_ci_0.01-2% error| lower_ci_2.01-15% error| lower_ci_Over 15% error| upper_ci_Exact match| upper_ci_0.01-2% error| upper_ci_2.01-15% error| upper_ci_Over 15% error|
|:----------|---------------------:|-----------------------:|------------------------:|------------------------:|--------------------:|----------------------:|-----------------------:|-----------------------:|--------------------:|----------------------:|-----------------------:|-----------------------:|
|Percentage |                 0.085|                    0.31|                     0.49|                    0.112|                0.025|                  0.142|                    0.29|                   0.032|                0.210|                   0.47|                    0.60|                    0.26|
|USD        |                 0.015|                    0.09|                     0.49|                    0.409|                0.004|                  0.031|                    0.32|                   0.176|                0.038|                   0.20|                    0.60|                    0.64|
|kWh        |                 0.148|                    0.40|                     0.39|                    0.061|                0.053|                  0.244|                    0.19|                   0.018|                0.318|                   0.52|                    0.57|                    0.13|</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb58"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Convert log-odds to odds ratios</span></span>
<span><span class="va">posterior_samples</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="va">ordinal_model_s1</span><span class="op">)</span></span>
<span><span class="va">odds_ratios</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  Percentage_vs_kWh <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="va">posterior_samples</span><span class="op">$</span><span class="va">b_refClassPercentage</span><span class="op">)</span>,</span>
<span>  USD_vs_kWh <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="va">posterior_samples</span><span class="op">$</span><span class="va">b_refClassUSD</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Calculate summary statistics</span></span>
<span><span class="va">odds_ratio_summary</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/data.frame.html">data.frame</a></span><span class="op">(</span></span>
<span>  comparison <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Percentage vs kWh"</span>, <span class="st">"USD vs kWh"</span><span class="op">)</span>,</span>
<span>  odds_ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">odds_ratios</span><span class="op">$</span><span class="va">Percentage_vs_kWh</span><span class="op">)</span>,</span>
<span>                 <span class="fu"><a href="https://rdrr.io/r/base/mean.html">mean</a></span><span class="op">(</span><span class="va">odds_ratios</span><span class="op">$</span><span class="va">USD_vs_kWh</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  ci_lower <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">odds_ratios</span><span class="op">$</span><span class="va">Percentage_vs_kWh</span>, <span class="fl">0.025</span><span class="op">)</span>,</span>
<span>               <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">odds_ratios</span><span class="op">$</span><span class="va">USD_vs_kWh</span>, <span class="fl">0.025</span><span class="op">)</span><span class="op">)</span>,</span>
<span>  ci_upper <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">odds_ratios</span><span class="op">$</span><span class="va">Percentage_vs_kWh</span>, <span class="fl">0.975</span><span class="op">)</span>,</span>
<span>               <span class="fu"><a href="https://rdrr.io/r/stats/quantile.html">quantile</a></span><span class="op">(</span><span class="va">odds_ratios</span><span class="op">$</span><span class="va">USD_vs_kWh</span>, <span class="fl">0.975</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="co"># Plot predicted probabilities</span></span>
<span><span class="fu">ggplot</span><span class="op">(</span><span class="va">pred_summary</span>, <span class="fu">aes</span><span class="op">(</span>x <span class="op">=</span> <span class="va">refClass</span>, y <span class="op">=</span> <span class="va">mean_prob</span>, fill <span class="op">=</span> <span class="va">.category</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_bar</span><span class="op">(</span>stat <span class="op">=</span> <span class="st">"identity"</span>, position <span class="op">=</span> <span class="fu">position_dodge</span><span class="op">(</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">geom_errorbar</span><span class="op">(</span><span class="fu">aes</span><span class="op">(</span>ymin <span class="op">=</span> <span class="va">lower_ci</span>, ymax <span class="op">=</span> <span class="va">upper_ci</span><span class="op">)</span>,</span>
<span>                position <span class="op">=</span> <span class="fu">position_dodge</span><span class="op">(</span>width <span class="op">=</span> <span class="fl">0.9</span><span class="op">)</span>, width <span class="op">=</span> <span class="fl">0.2</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">labs</span><span class="op">(</span>y <span class="op">=</span> <span class="st">"Predicted Probability"</span>, x <span class="op">=</span> <span class="st">"Reference Class"</span>, fill <span class="op">=</span> <span class="st">"Accuracy Level"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggtitle</span><span class="op">(</span><span class="st">"Study 1: Predicted Probabilities of Accuracy Level by Reference Class"</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">theme_minimal</span><span class="op">(</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<div>
<figure class="figure"><p><a href="overview_files/figure-html/unnamed-chunk-7-4.png" class="lightbox" data-gallery="quarto-lightbox-gallery-4"><img src="overview_files/figure-html/unnamed-chunk-7-4.png" class="img-fluid figure-img" width="672"></a></p>
</figure>
</div>
</div>
</div>
<section id="frequentist-alternative" class="level4"><h4 class="anchored" data-anchor-id="frequentist-alternative">Frequentist alternative</h4>
<div class="cell">
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb59"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">s1_glm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">matched_goal</span> <span class="op">~</span> <span class="va">refClass</span>, data <span class="op">=</span> <span class="va">s1_agg</span>, family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html">binomial</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">s1_glm</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = matched_goal ~ refClass, family = binomial(), data = s1_agg)

Coefficients:
                   Estimate Std. Error z value           Pr(&gt;|z|)    
(Intercept)          -0.511      0.117   -4.37 0.0000125256804014 ***
refClassPercentage   -0.751      0.187   -4.01 0.0000599223645706 ***
refClassUSD          -1.705      0.213   -8.01 0.0000000000000012 ***
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 1003.58  on 939  degrees of freedom
Residual deviance:  928.67  on 937  degrees of freedom
AIC: 934.7

Number of Fisher Scoring iterations: 4</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb61"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Odds Ratios and Confidence Intervals</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span>Odds_Ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/coef.html">coef</a></span><span class="op">(</span><span class="va">s1_glm</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/confint.html">confint</a></span><span class="op">(</span><span class="va">s1_glm</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>                   Odds_Ratio 2.5 % 97.5 %
(Intercept)              0.60  0.48   0.75
refClassPercentage       0.47  0.33   0.68
refClassUSD              0.18  0.12   0.27</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb63"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Chi-Square Test for Proportions in Study 1</span></span>
<span><span class="va">s1_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">s1_agg</span><span class="op">$</span><span class="va">refClass</span>, <span class="va">s1_agg</span><span class="op">$</span><span class="va">matched_goal</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/chisq.test.html">chisq.test</a></span><span class="op">(</span><span class="va">s1_table</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's Chi-squared test

data:  s1_table
X-squared = 73, df = 2, p-value &lt;0.0000000000000002</code></pre>
</div>
</div>
</section><section id="study-2-1" class="level3"><h3 class="anchored" data-anchor-id="study-2-1">Study 2</h3>
<div class="cell">
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb65"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># binomial regression on trial level data</span></span>
<span></span>
<span><span class="va">s2_br_3</span> <span class="op">&lt;-</span> <span class="fu">brm</span><span class="op">(</span></span>
<span>    <span class="va">matched_goal</span> <span class="op">~</span> <span class="va">refClass</span><span class="op">+</span><span class="va">rounded</span><span class="op">+</span><span class="va">pct_goal</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span><span class="op">|</span><span class="va">id</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span><span class="op">|</span><span class="va">state</span><span class="op">)</span>,</span>
<span>    data <span class="op">=</span> <span class="va">s2_agg1</span>,</span>
<span>    family <span class="op">=</span> <span class="fu">bernoulli</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    cores<span class="op">=</span><span class="fl">4</span>,</span>
<span>    iter<span class="op">=</span><span class="fl">2000</span>,</span>
<span>    control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>adapt_delta <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span>,</span>
<span>    file<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/model_cache"</span>,<span class="st">'s2_br_3.rds'</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">s2_br_3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code> Family: bernoulli 
  Links: mu = logit 
Formula: matched_goal ~ refClass + rounded + pct_goal + (1 | id) + (1 | state) 
   Data: s2_agg1 (Number of observations: 784) 
  Draws: 4 chains, each with iter = 2000; warmup = 1000; thin = 1;
         total post-warmup draws = 4000

Multilevel Hyperparameters:
~id (Number of levels: 196) 
              Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS
sd(Intercept)     6.98      1.13     5.06     9.49 1.00      844     1813

~state (Number of levels: 4) 
              Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS
sd(Intercept)     0.76      0.70     0.03     2.66 1.00     1280     1786

Regression Coefficients:
                   Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS
Intercept             -1.95      1.19    -4.38     0.34 1.00      871     1513
refClassPercentage    -3.03      1.46    -6.14    -0.28 1.01      580      868
refClassUSD           -5.67      1.79    -9.40    -2.37 1.00      741     1301
roundedRounded         1.51      0.37     0.81     2.24 1.00     4056     3115
pct_goal15%            0.27      0.38    -0.45     1.03 1.00     3990     2550

Draws were sampled using sampling(NUTS). For each parameter, Bulk_ESS
and Tail_ESS are effective sample size measures, and Rhat is the potential
scale reduction factor on split chains (at convergence, Rhat = 1).</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb67"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">mr_s2_3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="fu">describe_posterior</span><span class="op">(</span><span class="va">s2_br_3</span>, centrality <span class="op">=</span> <span class="st">"Mean"</span><span class="op">)</span><span class="op">)</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">mr_s2_3</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Term"</span>, <span class="st">"Estimate"</span>,<span class="st">"95% CrI Lower"</span>, <span class="st">"95% CrI Upper"</span>, <span class="st">"pd"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span> <span class="va">mr_s2_3</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>Term <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html">str_remove</a></span><span class="op">(</span><span class="va">Term</span>, <span class="st">"b_"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>Term <span class="op">=</span> <span class="fu">if_else</span><span class="op">(</span><span class="va">Term</span> <span class="op">==</span> <span class="st">"Intercept"</span>, <span class="st">"Intercept (kWh)"</span>, <span class="va">Term</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html">remove_rownames</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">kable</span><span class="op">(</span>booktabs <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">Term</th>
<th style="text-align: right;">Estimate</th>
<th style="text-align: right;">95% CrI Lower</th>
<th style="text-align: right;">95% CrI Upper</th>
<th style="text-align: right;">pd</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Intercept (kWh)</td>
<td style="text-align: right;">-1.96</td>
<td style="text-align: right;">-4.38</td>
<td style="text-align: right;">0.34</td>
<td style="text-align: right;">0.96</td>
</tr>
<tr class="even">
<td style="text-align: left;">refClassPercentage</td>
<td style="text-align: right;">-3.03</td>
<td style="text-align: right;">-6.14</td>
<td style="text-align: right;">-0.28</td>
<td style="text-align: right;">0.99</td>
</tr>
<tr class="odd">
<td style="text-align: left;">refClassUSD</td>
<td style="text-align: right;">-5.67</td>
<td style="text-align: right;">-9.40</td>
<td style="text-align: right;">-2.37</td>
<td style="text-align: right;">1.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">roundedRounded</td>
<td style="text-align: right;">1.50</td>
<td style="text-align: right;">0.81</td>
<td style="text-align: right;">2.24</td>
<td style="text-align: right;">1.00</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pct_goal15%</td>
<td style="text-align: right;">0.27</td>
<td style="text-align: right;">-0.45</td>
<td style="text-align: right;">1.03</td>
<td style="text-align: right;">0.76</td>
</tr>
</tbody>
</table>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb68"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">s2_br2_3</span> <span class="op">&lt;-</span> <span class="fu">brm</span><span class="op">(</span></span>
<span>    <span class="va">close_match</span> <span class="op">~</span> <span class="va">refClass</span><span class="op">+</span><span class="va">rounded</span><span class="op">+</span><span class="va">pct_goal</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span><span class="op">|</span><span class="va">id</span><span class="op">)</span> <span class="op">+</span> <span class="op">(</span><span class="fl">1</span><span class="op">|</span><span class="va">state</span><span class="op">)</span>,</span>
<span>    data <span class="op">=</span> <span class="va">s2_agg1</span>,</span>
<span>    family <span class="op">=</span> <span class="fu">bernoulli</span><span class="op">(</span><span class="op">)</span>,</span>
<span>    cores<span class="op">=</span><span class="fl">4</span>,</span>
<span>    iter<span class="op">=</span><span class="fl">2000</span>,</span>
<span>    control <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/list.html">list</a></span><span class="op">(</span>adapt_delta <span class="op">=</span> <span class="fl">0.99</span><span class="op">)</span>,</span>
<span>    file<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/paste.html">paste0</a></span><span class="op">(</span><span class="fu">here</span><span class="fu">::</span><span class="fu"><a href="https://here.r-lib.org//reference/here.html">here</a></span><span class="op">(</span><span class="st">"data/model_cache"</span>,<span class="st">'s2_br2_3.rds'</span><span class="op">)</span><span class="op">)</span>,</span>
<span>    <span class="op">)</span></span>
<span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">s2_br2_3</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code> Family: bernoulli 
  Links: mu = logit 
Formula: close_match ~ refClass + rounded + pct_goal + (1 | id) + (1 | state) 
   Data: s2_agg1 (Number of observations: 784) 
  Draws: 4 chains, each with iter = 2000; warmup = 1000; thin = 1;
         total post-warmup draws = 4000

Multilevel Hyperparameters:
~id (Number of levels: 196) 
              Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS
sd(Intercept)     5.80      0.82     4.37     7.65 1.00     1100     2329

~state (Number of levels: 4) 
              Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS
sd(Intercept)     0.73      0.63     0.03     2.42 1.00     1114     1439

Regression Coefficients:
                   Estimate Est.Error l-95% CI u-95% CI Rhat Bulk_ESS Tail_ESS
Intercept              0.09      0.94    -1.76     2.01 1.00     1032     1599
refClassPercentage    -1.64      1.16    -3.95     0.57 1.00      881     1466
refClassUSD           -3.55      1.29    -6.17    -1.13 1.00      716     1520
roundedRounded         0.56      0.29     0.00     1.12 1.00     5055     3112
pct_goal15%            0.66      0.29     0.11     1.26 1.00     5026     2940

Draws were sampled using sampling(NUTS). For each parameter, Bulk_ESS
and Tail_ESS are effective sample size measures, and Rhat is the potential
scale reduction factor on split chains (at convergence, Rhat = 1).</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb70"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co">#s2_br2_3 |&gt; emmeans(~refClass, type="response")</span></span>
<span></span>
<span><span class="va">mr_s2_3_2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/as.data.frame.html">as.data.frame</a></span><span class="op">(</span><span class="fu">describe_posterior</span><span class="op">(</span><span class="va">s2_br2_3</span>, centrality <span class="op">=</span> <span class="st">"Mean"</span><span class="op">)</span><span class="op">)</span><span class="op">[</span>, <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">4</span>,<span class="fl">5</span>,<span class="fl">6</span><span class="op">)</span><span class="op">]</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/colnames.html">colnames</a></span><span class="op">(</span><span class="va">mr_s2_3_2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html">c</a></span><span class="op">(</span><span class="st">"Term"</span>, <span class="st">"Estimate"</span>,<span class="st">"95% CrI Lower"</span>, <span class="st">"95% CrI Upper"</span>, <span class="st">"pd"</span><span class="op">)</span></span>
<span></span>
<span></span>
<span><span class="va">mr_s2_3_2</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>Term <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_remove.html">str_remove</a></span><span class="op">(</span><span class="va">Term</span>, <span class="st">"b_"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span><span class="fu">across</span><span class="op">(</span><span class="fu">where</span><span class="op">(</span><span class="va">is.numeric</span><span class="op">)</span>, \<span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="fu"><a href="https://rdrr.io/r/base/Round.html">round</a></span><span class="op">(</span><span class="va">x</span>, <span class="fl">3</span><span class="op">)</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">mutate</span><span class="op">(</span>Term <span class="op">=</span> <span class="fu">if_else</span><span class="op">(</span><span class="va">Term</span> <span class="op">==</span> <span class="st">"Intercept"</span>, <span class="st">"Intercept (kWh)"</span>, <span class="va">Term</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">tibble</span><span class="fu">::</span><span class="fu"><a href="https://tibble.tidyverse.org/reference/rownames.html">remove_rownames</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>    <span class="fu">kable</span><span class="op">(</span>booktabs <span class="op">=</span> <span class="cn">TRUE</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output-display">
<table class="caption-top table table-sm table-striped small">
<thead><tr class="header">
<th style="text-align: left;">Term</th>
<th style="text-align: right;">Estimate</th>
<th style="text-align: right;">95% CrI Lower</th>
<th style="text-align: right;">95% CrI Upper</th>
<th style="text-align: right;">pd</th>
</tr></thead>
<tbody>
<tr class="odd">
<td style="text-align: left;">Intercept (kWh)</td>
<td style="text-align: right;">0.09</td>
<td style="text-align: right;">-1.8</td>
<td style="text-align: right;">2.01</td>
<td style="text-align: right;">0.53</td>
</tr>
<tr class="even">
<td style="text-align: left;">refClassPercentage</td>
<td style="text-align: right;">-1.64</td>
<td style="text-align: right;">-4.0</td>
<td style="text-align: right;">0.57</td>
<td style="text-align: right;">0.93</td>
</tr>
<tr class="odd">
<td style="text-align: left;">refClassUSD</td>
<td style="text-align: right;">-3.55</td>
<td style="text-align: right;">-6.2</td>
<td style="text-align: right;">-1.13</td>
<td style="text-align: right;">1.00</td>
</tr>
<tr class="even">
<td style="text-align: left;">roundedRounded</td>
<td style="text-align: right;">0.56</td>
<td style="text-align: right;">0.0</td>
<td style="text-align: right;">1.12</td>
<td style="text-align: right;">0.98</td>
</tr>
<tr class="odd">
<td style="text-align: left;">pct_goal15%</td>
<td style="text-align: right;">0.66</td>
<td style="text-align: right;">0.1</td>
<td style="text-align: right;">1.26</td>
<td style="text-align: right;">0.99</td>
</tr>
</tbody>
</table>
</div>
</div>
<div class="cell">
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb71"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="va">s2_glm</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/glm.html">glm</a></span><span class="op">(</span><span class="va">matched_goal</span> <span class="op">~</span> <span class="va">refClass</span> <span class="op">+</span> <span class="va">rounded</span> <span class="op">+</span> <span class="va">pct_goal</span>, data <span class="op">=</span> <span class="va">s2_agg1</span>, family <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/family.html">binomial</a></span><span class="op">(</span><span class="op">)</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/summary.html">summary</a></span><span class="op">(</span><span class="va">s2_glm</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
Call:
glm(formula = matched_goal ~ refClass + rounded + pct_goal, family = binomial(), 
    data = s2_agg1)

Coefficients:
                   Estimate Std. Error z value     Pr(&gt;|z|)    
(Intercept)         -0.4899     0.1691   -2.90       0.0038 ** 
refClassPercentage  -0.7482     0.1830   -4.09 0.0000435218 ***
refClassUSD         -1.2275     0.2089   -5.88 0.0000000042 ***
roundedRounded       0.3737     0.1608    2.32       0.0201 *  
pct_goal15%          0.0768     0.1603    0.48       0.6319    
---
Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1

(Dispersion parameter for binomial family taken to be 1)

    Null deviance: 960.87  on 783  degrees of freedom
Residual deviance: 915.67  on 779  degrees of freedom
AIC: 925.7

Number of Fisher Scoring iterations: 4</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb73"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Odds Ratios and Confidence Intervals</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/Log.html">exp</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html">cbind</a></span><span class="op">(</span>Odds_Ratio <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/stats/coef.html">coef</a></span><span class="op">(</span><span class="va">s2_glm</span><span class="op">)</span>, <span class="fu"><a href="https://rdrr.io/r/stats/confint.html">confint</a></span><span class="op">(</span><span class="va">s2_glm</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>                   Odds_Ratio 2.5 % 97.5 %
(Intercept)              0.61  0.44   0.85
refClassPercentage       0.47  0.33   0.68
refClassUSD              0.29  0.19   0.44
roundedRounded           1.45  1.06   1.99
pct_goal15%              1.08  0.79   1.48</code></pre>
</div>
<details class="code-fold"><summary>Display code</summary><div class="sourceCode" id="cb75"><pre class="downlit sourceCode r code-with-copy"><code class="sourceCode R"><span><span class="co"># Chi-Square Test for Proportions in Study 2</span></span>
<span><span class="va">s2_table</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/table.html">table</a></span><span class="op">(</span><span class="va">s2_agg1</span><span class="op">$</span><span class="va">refClass</span>, <span class="va">s2_agg1</span><span class="op">$</span><span class="va">matched_goal</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/stats/chisq.test.html">chisq.test</a></span><span class="op">(</span><span class="va">s2_table</span><span class="op">)</span></span></code><button title="Copy to Clipboard" class="code-copy-button"><i class="bi"></i></button></pre></div>
</details><div class="cell-output cell-output-stdout">
<pre><code>
    Pearson's Chi-squared test

data:  s2_table
X-squared = 40, df = 2, p-value = 0.000000003</code></pre>
</div>
</div>


<!-- -->

</section></section></main><!-- /main --><script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "î§‹";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
  const viewSource = window.document.getElementById('quarto-view-source') ||
                     window.document.getElementById('quarto-code-tools-source');
  if (viewSource) {
    const sourceUrl = viewSource.getAttribute("data-quarto-source-url");
    viewSource.addEventListener("click", function(e) {
      if (sourceUrl) {
        // rstudio viewer pane
        if (/\bcapabilities=\b/.test(window.location)) {
          window.open(sourceUrl);
        } else {
          window.location.href = sourceUrl;
        }
      } else {
        const modal = new bootstrap.Modal(document.getElementById('quarto-embedded-source-code-modal'));
        modal.show();
      }
      return false;
    });
  }
  function toggleCodeHandler(show) {
    return function(e) {
      const detailsSrc = window.document.querySelectorAll(".cell > details > .sourceCode");
      for (let i=0; i<detailsSrc.length; i++) {
        const details = detailsSrc[i].parentElement;
        if (show) {
          details.open = true;
        } else {
          details.removeAttribute("open");
        }
      }
      const cellCodeDivs = window.document.querySelectorAll(".cell > .sourceCode");
      const fromCls = show ? "hidden" : "unhidden";
      const toCls = show ? "unhidden" : "hidden";
      for (let i=0; i<cellCodeDivs.length; i++) {
        const codeDiv = cellCodeDivs[i];
        if (codeDiv.classList.contains(fromCls)) {
          codeDiv.classList.remove(fromCls);
          codeDiv.classList.add(toCls);
        } 
      }
      return false;
    }
  }
  const hideAllCode = window.document.getElementById("quarto-hide-all-code");
  if (hideAllCode) {
    hideAllCode.addEventListener("click", toggleCodeHandler(false));
  }
  const showAllCode = window.document.getElementById("quarto-show-all-code");
  if (showAllCode) {
    showAllCode.addEventListener("click", toggleCodeHandler(true));
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp("https:\/\/tegorman13\.github\.io\/Representation_Study\/");
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
          // target, if specified
          link.setAttribute("target", "_blank");
          if (link.getAttribute("rel") === null) {
            link.setAttribute("rel", "noopener");
          }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script><nav class="page-navigation column-body"><div class="nav-page nav-page-previous">
      <a href="../nb/results.html" class="pagination-link" aria-label="Results">
        <i class="bi bi-arrow-left-short"></i> <span class="nav-page-text">Results</span>
      </a>          
  </div>
  <div class="nav-page nav-page-next">
      <a href="../misc/outlier.html" class="pagination-link" aria-label="Outliers">
        <span class="nav-page-text">Outliers</span> <i class="bi bi-arrow-right-short"></i>
      </a>
  </div>
</nav><div class="modal fade" id="quarto-embedded-source-code-modal" tabindex="-1" aria-labelledby="quarto-embedded-source-code-modal-label" aria-hidden="true"><div class="modal-dialog modal-dialog-scrollable"><div class="modal-content"><div class="modal-header"><h5 class="modal-title" id="quarto-embedded-source-code-modal-label">Source Code</h5><button class="btn-close" data-bs-dismiss="modal"></button></div><div class="modal-body"><div class="">
<div class="sourceCode" id="cb77" data-shortcodes="false"><pre class="sourceCode markdown code-with-copy"><code class="sourceCode markdown"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="an">title:</span><span class="co"> "Effect of Reference Class on Planning to Conserve"</span></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="an">author:</span></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="co">- name: Thomas E. Gorman</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="co">  url: https://tegorman13.github.io/</span></span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="co">  affiliations: </span></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="co">  - name:  Communication and Cognition Lab, Purdue University, USA</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a><span class="co">    affiliation-url: https://web.ics.purdue.edu/~treimer/</span></span>
<span id="cb77-9"><a href="#cb77-9" aria-hidden="true" tabindex="-1"></a><span class="co">#lightbox: true</span></span>
<span id="cb77-10"><a href="#cb77-10" aria-hidden="true" tabindex="-1"></a><span class="an">toc:</span><span class="co"> false</span></span>
<span id="cb77-11"><a href="#cb77-11" aria-hidden="true" tabindex="-1"></a><span class="an">code-fold:</span><span class="co"> true</span></span>
<span id="cb77-12"><a href="#cb77-12" aria-hidden="true" tabindex="-1"></a><span class="an">code-tools:</span><span class="co"> true</span></span>
<span id="cb77-13"><a href="#cb77-13" aria-hidden="true" tabindex="-1"></a><span class="an">execute:</span></span>
<span id="cb77-14"><a href="#cb77-14" aria-hidden="true" tabindex="-1"></a><span class="co">  #echo: false</span></span>
<span id="cb77-15"><a href="#cb77-15" aria-hidden="true" tabindex="-1"></a><span class="co">  warning: false</span></span>
<span id="cb77-16"><a href="#cb77-16" aria-hidden="true" tabindex="-1"></a><span class="an">format:</span></span>
<span id="cb77-17"><a href="#cb77-17" aria-hidden="true" tabindex="-1"></a><span class="co">  html: </span></span>
<span id="cb77-18"><a href="#cb77-18" aria-hidden="true" tabindex="-1"></a><span class="co">    grid:</span></span>
<span id="cb77-19"><a href="#cb77-19" aria-hidden="true" tabindex="-1"></a><span class="co">      sidebar-width: 220px</span></span>
<span id="cb77-20"><a href="#cb77-20" aria-hidden="true" tabindex="-1"></a><span class="co">      body-width: 1200px</span></span>
<span id="cb77-21"><a href="#cb77-21" aria-hidden="true" tabindex="-1"></a><span class="co">      margin-width: 170px</span></span>
<span id="cb77-22"><a href="#cb77-22" aria-hidden="true" tabindex="-1"></a><span class="co">      gutter-width: 1.0rem</span></span>
<span id="cb77-23"><a href="#cb77-23" aria-hidden="true" tabindex="-1"></a><span class="co">  hugo-md:</span></span>
<span id="cb77-24"><a href="#cb77-24" aria-hidden="true" tabindex="-1"></a><span class="co">    include: true</span></span>
<span id="cb77-25"><a href="#cb77-25" aria-hidden="true" tabindex="-1"></a><span class="co">    html-math-method: mathjax</span></span>
<span id="cb77-26"><a href="#cb77-26" aria-hidden="true" tabindex="-1"></a><span class="co">    output-file: overview_hugo.md</span></span>
<span id="cb77-27"><a href="#cb77-27" aria-hidden="true" tabindex="-1"></a><span class="co">  gfm:</span></span>
<span id="cb77-28"><a href="#cb77-28" aria-hidden="true" tabindex="-1"></a><span class="co">    echo: true</span></span>
<span id="cb77-29"><a href="#cb77-29" aria-hidden="true" tabindex="-1"></a><span class="co">    output-file: overview_gfm.md</span></span>
<span id="cb77-30"><a href="#cb77-30" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb77-31"><a href="#cb77-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-34"><a href="#cb77-34" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-35"><a href="#cb77-35" aria-hidden="true" tabindex="-1"></a>pacman<span class="sc">::</span><span class="fu">p_load</span>(dplyr,purrr,tidyr,here,tibble,brms,rstan,bayestestR,emmeans,tidybayes,modelsummary,</span>
<span id="cb77-36"><a href="#cb77-36" aria-hidden="true" tabindex="-1"></a>               ggplot2,gt,knitr,kableExtra,ggh4x,lme4,flextable,pander)</span>
<span id="cb77-37"><a href="#cb77-37" aria-hidden="true" tabindex="-1"></a><span class="fu">options</span>(<span class="at">digits=</span><span class="dv">2</span>, <span class="at">scipen=</span><span class="dv">999</span>, <span class="at">dplyr.summarise.inform=</span><span class="cn">FALSE</span>)</span>
<span id="cb77-38"><a href="#cb77-38" aria-hidden="true" tabindex="-1"></a><span class="fu">walk</span>(<span class="fu">c</span>(<span class="st">"fun_plot"</span>), <span class="sc">~</span> <span class="fu">source</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="fu">paste0</span>(<span class="st">"scripts/"</span>, .x, <span class="st">".R"</span>))))</span>
<span id="cb77-39"><a href="#cb77-39" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_set</span>(<span class="fu">theme_nice</span>())</span>
<span id="cb77-40"><a href="#cb77-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-41"><a href="#cb77-41" aria-hidden="true" tabindex="-1"></a>s1 <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/s1_processed.rds"</span>)) <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span>(id <span class="sc">%in%</span> <span class="fu">readRDS</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/s1_discrep_ids.rds"</span>))))</span>
<span id="cb77-42"><a href="#cb77-42" aria-hidden="true" tabindex="-1"></a>s2_long <span class="ot">&lt;-</span> <span class="fu">readRDS</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/s2_processed.rds"</span>)) <span class="sc">|&gt;</span> <span class="fu">filter</span>(<span class="sc">!</span>(id <span class="sc">%in%</span> <span class="fu">readRDS</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/s2_discrep_ids.rds"</span>))))</span>
<span id="cb77-43"><a href="#cb77-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-44"><a href="#cb77-44" aria-hidden="true" tabindex="-1"></a>state_code_map <span class="ot">&lt;-</span> <span class="fu">c</span>(</span>
<span id="cb77-45"><a href="#cb77-45" aria-hidden="true" tabindex="-1"></a>  <span class="st">"CAL"</span> <span class="ot">=</span> <span class="st">"California"</span>,</span>
<span id="cb77-46"><a href="#cb77-46" aria-hidden="true" tabindex="-1"></a>  <span class="st">"TEX"</span> <span class="ot">=</span> <span class="st">"Texas"</span>,</span>
<span id="cb77-47"><a href="#cb77-47" aria-hidden="true" tabindex="-1"></a>  <span class="st">"COL"</span> <span class="ot">=</span> <span class="st">"Colorado"</span>,</span>
<span id="cb77-48"><a href="#cb77-48" aria-hidden="true" tabindex="-1"></a>  <span class="st">"MASS"</span> <span class="ot">=</span> <span class="st">"Massachusetts"</span></span>
<span id="cb77-49"><a href="#cb77-49" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb77-50"><a href="#cb77-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-51"><a href="#cb77-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-52"><a href="#cb77-52" aria-hidden="true" tabindex="-1"></a>state_to_code <span class="ot">&lt;-</span> state_code_map</span>
<span id="cb77-53"><a href="#cb77-53" aria-hidden="true" tabindex="-1"></a>code_to_state <span class="ot">&lt;-</span> <span class="fu">setNames</span>(<span class="fu">names</span>(state_code_map), state_code_map)</span>
<span id="cb77-54"><a href="#cb77-54" aria-hidden="true" tabindex="-1"></a>lookup_code <span class="ot">&lt;-</span> <span class="cf">function</span>(state) {</span>
<span id="cb77-55"><a href="#cb77-55" aria-hidden="true" tabindex="-1"></a>  <span class="cf">if</span> (state <span class="sc">%in%</span> <span class="fu">names</span>(state_to_code)) {</span>
<span id="cb77-56"><a href="#cb77-56" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(state_to_code[[state]])</span>
<span id="cb77-57"><a href="#cb77-57" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> <span class="cf">if</span> (state <span class="sc">%in%</span> <span class="fu">names</span>(code_to_state)) {</span>
<span id="cb77-58"><a href="#cb77-58" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(code_to_state[[state]])</span>
<span id="cb77-59"><a href="#cb77-59" aria-hidden="true" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb77-60"><a href="#cb77-60" aria-hidden="true" tabindex="-1"></a>    <span class="fu">return</span>(<span class="cn">NA</span>)  <span class="co"># Return NA if not found in either mapping</span></span>
<span id="cb77-61"><a href="#cb77-61" aria-hidden="true" tabindex="-1"></a>  }</span>
<span id="cb77-62"><a href="#cb77-62" aria-hidden="true" tabindex="-1"></a>}</span>
<span id="cb77-63"><a href="#cb77-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-64"><a href="#cb77-64" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-65"><a href="#cb77-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-66"><a href="#cb77-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-67"><a href="#cb77-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-70"><a href="#cb77-70" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-71"><a href="#cb77-71" aria-hidden="true" tabindex="-1"></a>s1 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(refClass) <span class="sc">|&gt;</span> </span>
<span id="cb77-72"><a href="#cb77-72" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Reference Class"</span> <span class="ot">=</span> refClass) <span class="sc">|&gt;</span></span>
<span id="cb77-73"><a href="#cb77-73" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n_distinct</span>(id)) <span class="sc">|&gt;</span> </span>
<span id="cb77-74"><a href="#cb77-74" aria-hidden="true" tabindex="-1"></a>    pander<span class="sc">::</span><span class="fu">pandoc.table</span>(<span class="at">caption=</span><span class="st">"Study 1: Number of unique IDs per condition"</span>)</span>
<span id="cb77-75"><a href="#cb77-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-76"><a href="#cb77-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-77"><a href="#cb77-77" aria-hidden="true" tabindex="-1"></a>s1 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(refClass,state) <span class="sc">|&gt;</span> </span>
<span id="cb77-78"><a href="#cb77-78" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Reference Class"</span> <span class="ot">=</span> refClass) <span class="sc">|&gt;</span></span>
<span id="cb77-79"><a href="#cb77-79" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n_distinct</span>(id)) <span class="sc">|&gt;</span> </span>
<span id="cb77-80"><a href="#cb77-80" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rowwise</span>() <span class="sc">|&gt;</span> </span>
<span id="cb77-81"><a href="#cb77-81" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">state=</span><span class="fu">lookup_code</span>(state)) <span class="sc">|&gt;</span> </span>
<span id="cb77-82"><a href="#cb77-82" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">names_from=</span>state,<span class="at">values_from=</span>n) <span class="sc">|&gt;</span></span>
<span id="cb77-83"><a href="#cb77-83" aria-hidden="true" tabindex="-1"></a>    pander<span class="sc">::</span><span class="fu">pandoc.table</span>(<span class="at">caption=</span><span class="st">"Study 1: Number of unique IDs per condition by state"</span>)</span>
<span id="cb77-84"><a href="#cb77-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-85"><a href="#cb77-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-86"><a href="#cb77-86" aria-hidden="true" tabindex="-1"></a>s1 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(refClass,calc) <span class="sc">|&gt;</span> </span>
<span id="cb77-87"><a href="#cb77-87" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Reference Class"</span> <span class="ot">=</span> refClass) <span class="sc">|&gt;</span></span>
<span id="cb77-88"><a href="#cb77-88" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n_distinct</span>(id)) <span class="sc">|&gt;</span> </span>
<span id="cb77-89"><a href="#cb77-89" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">names_from=</span>calc,<span class="at">values_from=</span>n) <span class="sc">|&gt;</span></span>
<span id="cb77-90"><a href="#cb77-90" aria-hidden="true" tabindex="-1"></a>    pander<span class="sc">::</span><span class="fu">pandoc.table</span>(<span class="at">caption=</span><span class="st">"Study 1: Number of unique IDs per condition by calculator use"</span>)</span>
<span id="cb77-91"><a href="#cb77-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-92"><a href="#cb77-92" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">xtabs</span>(<span class="sc">~</span>refClass,s1)) <span class="sc">|&gt;</span> <span class="fu">kable</span>()</span>
<span id="cb77-93"><a href="#cb77-93" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">xtabs</span>(<span class="sc">~</span>refClass<span class="sc">+</span>calc,s1)) <span class="sc">|&gt;</span> <span class="fu">kable</span>()</span>
<span id="cb77-94"><a href="#cb77-94" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">xtabs</span>(<span class="sc">~</span>refClass<span class="sc">+</span>state,s1)) <span class="sc">|&gt;</span> <span class="fu">kable</span>()</span>
<span id="cb77-95"><a href="#cb77-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-96"><a href="#cb77-96" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-97"><a href="#cb77-97" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-98"><a href="#cb77-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-99"><a href="#cb77-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-100"><a href="#cb77-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-101"><a href="#cb77-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-102"><a href="#cb77-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-103"><a href="#cb77-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-104"><a href="#cb77-104" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-105"><a href="#cb77-105" aria-hidden="true" tabindex="-1"></a><span class="fu">### Study 2 - Subject counts </span></span>
<span id="cb77-108"><a href="#cb77-108" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-109"><a href="#cb77-109" aria-hidden="true" tabindex="-1"></a>s2_long <span class="sc">|&gt;</span> <span class="fu">group_by</span>(refClass) <span class="sc">|&gt;</span></span>
<span id="cb77-110"><a href="#cb77-110" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Reference Class"</span> <span class="ot">=</span> refClass) <span class="sc">|&gt;</span></span>
<span id="cb77-111"><a href="#cb77-111" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n_distinct</span>(id)) <span class="sc">|&gt;</span> </span>
<span id="cb77-112"><a href="#cb77-112" aria-hidden="true" tabindex="-1"></a>    pander<span class="sc">::</span><span class="fu">pandoc.table</span>(<span class="at">caption=</span><span class="st">"Study 2: Number of unique IDs per condition"</span>)</span>
<span id="cb77-113"><a href="#cb77-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-114"><a href="#cb77-114" aria-hidden="true" tabindex="-1"></a>s2_long <span class="sc">|&gt;</span> <span class="fu">group_by</span>(refClass,calc) <span class="sc">|&gt;</span></span>
<span id="cb77-115"><a href="#cb77-115" aria-hidden="true" tabindex="-1"></a>    <span class="fu">rename</span>(<span class="st">"Reference Class"</span> <span class="ot">=</span> refClass) <span class="sc">|&gt;</span></span>
<span id="cb77-116"><a href="#cb77-116" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">calc=</span><span class="fu">case_when</span>(calc<span class="sc">==</span><span class="st">"Calculator"</span> <span class="sc">~</span> <span class="st">"Used Calculator"</span>,</span>
<span id="cb77-117"><a href="#cb77-117" aria-hidden="true" tabindex="-1"></a>                        calc<span class="sc">==</span><span class="st">"No Calculator"</span> <span class="sc">~</span> <span class="st">"No Calculator"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb77-118"><a href="#cb77-118" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">n=</span><span class="fu">n_distinct</span>(id)) <span class="sc">|&gt;</span></span>
<span id="cb77-119"><a href="#cb77-119" aria-hidden="true" tabindex="-1"></a>    <span class="fu">pivot_wider</span>(<span class="at">names_from=</span>calc,<span class="at">values_from=</span>n) <span class="sc">|&gt;</span></span>
<span id="cb77-120"><a href="#cb77-120" aria-hidden="true" tabindex="-1"></a>    pander<span class="sc">::</span><span class="fu">pandoc.table</span>(<span class="at">caption=</span><span class="st">"Study 2: Number of unique IDs per condition by calculator use"</span>)</span>
<span id="cb77-121"><a href="#cb77-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-122"><a href="#cb77-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-123"><a href="#cb77-123" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">xtabs</span>(<span class="sc">~</span>refClass,s2_long)) <span class="sc">|&gt;</span> <span class="fu">kable</span>()</span>
<span id="cb77-124"><a href="#cb77-124" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">xtabs</span>(<span class="sc">~</span>refClass<span class="sc">+</span>state,s2_long))</span>
<span id="cb77-125"><a href="#cb77-125" aria-hidden="true" tabindex="-1"></a><span class="fu">prop.table</span>(<span class="fu">xtabs</span>(<span class="sc">~</span>refClass<span class="sc">+</span>calc,</span>
<span id="cb77-126"><a href="#cb77-126" aria-hidden="true" tabindex="-1"></a>s2_long <span class="sc">|&gt;</span> <span class="fu">mutate</span>(<span class="at">calc=</span><span class="fu">case_when</span>(calc<span class="sc">==</span><span class="st">"Calculator"</span> <span class="sc">~</span> <span class="st">"Used Calculator"</span>,</span>
<span id="cb77-127"><a href="#cb77-127" aria-hidden="true" tabindex="-1"></a>                      calc<span class="sc">==</span><span class="st">"No Calculator"</span> <span class="sc">~</span> <span class="st">"No Calculator"</span>)))) <span class="sc">|&gt;</span> <span class="fu">kable</span>()</span>
<span id="cb77-128"><a href="#cb77-128" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-129"><a href="#cb77-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-130"><a href="#cb77-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-131"><a href="#cb77-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-132"><a href="#cb77-132" aria-hidden="true" tabindex="-1"></a><span class="fu">## Performance</span></span>
<span id="cb77-133"><a href="#cb77-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-134"><a href="#cb77-134" aria-hidden="true" tabindex="-1"></a><span class="fu">### Study 1</span></span>
<span id="cb77-135"><a href="#cb77-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-138"><a href="#cb77-138" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-139"><a href="#cb77-139" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-width: 12</span></span>
<span id="cb77-140"><a href="#cb77-140" aria-hidden="true" tabindex="-1"></a><span class="co">#| fig-height: 8</span></span>
<span id="cb77-141"><a href="#cb77-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-142"><a href="#cb77-142" aria-hidden="true" tabindex="-1"></a>s1_agg <span class="ot">&lt;-</span> s1 <span class="sc">|&gt;</span> </span>
<span id="cb77-143"><a href="#cb77-143" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(appliance <span class="sc">!=</span><span class="st">"Total kWh"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb77-144"><a href="#cb77-144" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(id,refClass,state,block,plan,calc,edu,pct_goal) <span class="sc">|&gt;</span> </span>
<span id="cb77-145"><a href="#cb77-145" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">total_kWh =</span> <span class="fu">sum</span>(value),<span class="at">orig_kWh=</span><span class="fu">sum</span>(family), </span>
<span id="cb77-146"><a href="#cb77-146" aria-hidden="true" tabindex="-1"></a>                <span class="at">pct_change =</span> <span class="fu">round</span>((orig_kWh<span class="sc">-</span>total_kWh)<span class="sc">/</span>orig_kWh,<span class="dv">3</span>), </span>
<span id="cb77-147"><a href="#cb77-147" aria-hidden="true" tabindex="-1"></a>                <span class="at">n_change =</span> <span class="fu">sum</span>(value<span class="sc">!=</span>family),</span>
<span id="cb77-148"><a href="#cb77-148" aria-hidden="true" tabindex="-1"></a>                <span class="at">state_p_dif=</span><span class="fu">mean</span>(state_p_dif),</span>
<span id="cb77-149"><a href="#cb77-149" aria-hidden="true" tabindex="-1"></a>                <span class="at">state_f_dif=</span><span class="fu">mean</span>(state_f_dif),</span>
<span id="cb77-150"><a href="#cb77-150" aria-hidden="true" tabindex="-1"></a>                <span class="at">n_less_avg =</span> <span class="fu">sum</span>(less_avg),</span>
<span id="cb77-151"><a href="#cb77-151" aria-hidden="true" tabindex="-1"></a>                <span class="at">duration=</span><span class="fu">first</span>(Duration__in_seconds_)) <span class="sc">|&gt;</span> </span>
<span id="cb77-152"><a href="#cb77-152" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">matched_goal =</span> (pct_change <span class="sc">==</span> pct_goal), </span>
<span id="cb77-153"><a href="#cb77-153" aria-hidden="true" tabindex="-1"></a>                <span class="at">error =</span> pct_change <span class="sc">-</span> pct_goal,</span>
<span id="cb77-154"><a href="#cb77-154" aria-hidden="true" tabindex="-1"></a>                <span class="at">abs_error =</span> <span class="fu">abs</span>(error),</span>
<span id="cb77-155"><a href="#cb77-155" aria-hidden="true" tabindex="-1"></a>                <span class="at">close_match =</span> abs_error <span class="sc">&lt;=</span> <span class="fl">0.03</span>)</span>
<span id="cb77-156"><a href="#cb77-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-157"><a href="#cb77-157" aria-hidden="true" tabindex="-1"></a>s1_agg4 <span class="ot">&lt;-</span> s1_agg <span class="sc">|&gt;</span> <span class="fu">group_by</span>(id,refClass) <span class="sc">|&gt;</span> </span>
<span id="cb77-158"><a href="#cb77-158" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mg=</span><span class="fu">sum</span>(matched_goal),<span class="at">n=</span><span class="fu">n</span>(), <span class="at">pct=</span>mg<span class="sc">/</span>n) </span>
<span id="cb77-159"><a href="#cb77-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-160"><a href="#cb77-160" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-161"><a href="#cb77-161" aria-hidden="true" tabindex="-1"></a><span class="co"># overall pct of subjects who matched their goal</span></span>
<span id="cb77-162"><a href="#cb77-162" aria-hidden="true" tabindex="-1"></a>s1_agg4 <span class="sc">|&gt;</span> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb77-163"><a href="#cb77-163" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb77-164"><a href="#cb77-164" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(pct),</span>
<span id="cb77-165"><a href="#cb77-165" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(pct),</span>
<span id="cb77-166"><a href="#cb77-166" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb77-167"><a href="#cb77-167" aria-hidden="true" tabindex="-1"></a>    <span class="at">se=</span><span class="fu">sd</span>(pct)<span class="sc">/</span><span class="fu">sqrt</span>(n)</span>
<span id="cb77-168"><a href="#cb77-168" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> pander<span class="sc">::</span><span class="fu">pandoc.table</span>(<span class="at">caption=</span><span class="st">"Study 1: Proportion of participants who matched their goal overall"</span>)</span>
<span id="cb77-169"><a href="#cb77-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-170"><a href="#cb77-170" aria-hidden="true" tabindex="-1"></a><span class="co"># proportion matching vs close match</span></span>
<span id="cb77-171"><a href="#cb77-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-172"><a href="#cb77-172" aria-hidden="true" tabindex="-1"></a>s1_agg <span class="sc">|&gt;</span> <span class="fu">pivot_longer</span>(<span class="fu">c</span>(matched_goal,close_match),<span class="at">names_to=</span><span class="st">"match_type"</span>,<span class="at">values_to=</span><span class="st">"match"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb77-173"><a href="#cb77-173" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(id,match_type) <span class="sc">|&gt;</span></span>
<span id="cb77-174"><a href="#cb77-174" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mg=</span><span class="fu">sum</span>(match),<span class="at">n=</span><span class="fu">n</span>(), <span class="at">pct=</span>mg<span class="sc">/</span>n) <span class="sc">|&gt;</span></span>
<span id="cb77-175"><a href="#cb77-175" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(match_type) <span class="sc">|&gt;</span></span>
<span id="cb77-176"><a href="#cb77-176" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb77-177"><a href="#cb77-177" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(pct),</span>
<span id="cb77-178"><a href="#cb77-178" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(pct),</span>
<span id="cb77-179"><a href="#cb77-179" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb77-180"><a href="#cb77-180" aria-hidden="true" tabindex="-1"></a>    <span class="at">se=</span><span class="fu">sd</span>(pct)<span class="sc">/</span><span class="fu">sqrt</span>(n)</span>
<span id="cb77-181"><a href="#cb77-181" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> pander<span class="sc">::</span><span class="fu">pandoc.table</span>(<span class="at">caption=</span><span class="st">"Study 1: Proportion of participants who matched their goal or were within 3% of their goal"</span>)</span>
<span id="cb77-182"><a href="#cb77-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-183"><a href="#cb77-183" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-184"><a href="#cb77-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-185"><a href="#cb77-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-186"><a href="#cb77-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-187"><a href="#cb77-187" aria-hidden="true" tabindex="-1"></a><span class="co"># refClass</span></span>
<span id="cb77-188"><a href="#cb77-188" aria-hidden="true" tabindex="-1"></a>s1_agg4 <span class="sc">|&gt;</span> </span>
<span id="cb77-189"><a href="#cb77-189" aria-hidden="true" tabindex="-1"></a><span class="fu">group_by</span>(refClass) <span class="sc">|&gt;</span> </span>
<span id="cb77-190"><a href="#cb77-190" aria-hidden="true" tabindex="-1"></a><span class="fu">summarise</span>(</span>
<span id="cb77-191"><a href="#cb77-191" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(pct),</span>
<span id="cb77-192"><a href="#cb77-192" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(pct),</span>
<span id="cb77-193"><a href="#cb77-193" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb77-194"><a href="#cb77-194" aria-hidden="true" tabindex="-1"></a>    <span class="at">se=</span><span class="fu">sd</span>(pct)<span class="sc">/</span><span class="fu">sqrt</span>(n)</span>
<span id="cb77-195"><a href="#cb77-195" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> pander<span class="sc">::</span><span class="fu">pandoc.table</span>(<span class="at">caption=</span><span class="st">"Study 1: Proportion of participants who matched their goal by condition"</span>)</span>
<span id="cb77-196"><a href="#cb77-196" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-197"><a href="#cb77-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-198"><a href="#cb77-198" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-199"><a href="#cb77-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-200"><a href="#cb77-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-201"><a href="#cb77-201" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-202"><a href="#cb77-202" aria-hidden="true" tabindex="-1"></a><span class="fu">### Study 2</span></span>
<span id="cb77-203"><a href="#cb77-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-206"><a href="#cb77-206" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-207"><a href="#cb77-207" aria-hidden="true" tabindex="-1"></a>s2_agg1 <span class="ot">&lt;-</span> s2_long <span class="sc">|&gt;</span> </span>
<span id="cb77-208"><a href="#cb77-208" aria-hidden="true" tabindex="-1"></a>  <span class="fu">filter</span>(appliance <span class="sc">!=</span> <span class="st">"TOTAL"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb77-209"><a href="#cb77-209" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(id, state,refClass,pct,pct_goal,plan,rounded) <span class="sc">|&gt;</span> </span>
<span id="cb77-210"><a href="#cb77-210" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(</span>
<span id="cb77-211"><a href="#cb77-211" aria-hidden="true" tabindex="-1"></a>    <span class="at">total_kWh =</span> <span class="fu">sum</span>(value),</span>
<span id="cb77-212"><a href="#cb77-212" aria-hidden="true" tabindex="-1"></a>    <span class="at">orig_kWh =</span> <span class="fu">sum</span>(family),</span>
<span id="cb77-213"><a href="#cb77-213" aria-hidden="true" tabindex="-1"></a>    <span class="at">pct_change =</span> <span class="fu">round</span>((orig_kWh <span class="sc">-</span> total_kWh) <span class="sc">/</span> orig_kWh, <span class="dv">3</span>),</span>
<span id="cb77-214"><a href="#cb77-214" aria-hidden="true" tabindex="-1"></a>    <span class="at">state_dif =</span> <span class="fu">mean</span>(state_dif),</span>
<span id="cb77-215"><a href="#cb77-215" aria-hidden="true" tabindex="-1"></a>    <span class="at">.groups =</span> <span class="st">"drop"</span></span>
<span id="cb77-216"><a href="#cb77-216" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb77-217"><a href="#cb77-217" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(<span class="at">matched_goal =</span> (pct_change <span class="sc">==</span> pct),</span>
<span id="cb77-218"><a href="#cb77-218" aria-hidden="true" tabindex="-1"></a>  <span class="at">close_match =</span> <span class="fu">abs</span>(pct_change<span class="sc">-</span>pct)<span class="sc">&lt;</span>.<span class="dv">03</span>)</span>
<span id="cb77-219"><a href="#cb77-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-220"><a href="#cb77-220" aria-hidden="true" tabindex="-1"></a>s2_agg4 <span class="ot">&lt;-</span> s2_agg1<span class="sc">|&gt;</span> <span class="fu">group_by</span>(id,refClass) <span class="sc">|&gt;</span> </span>
<span id="cb77-221"><a href="#cb77-221" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mg=</span><span class="fu">sum</span>(matched_goal),<span class="at">n=</span><span class="fu">n</span>(), <span class="at">pct=</span>mg<span class="sc">/</span>n) </span>
<span id="cb77-222"><a href="#cb77-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-223"><a href="#cb77-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-224"><a href="#cb77-224" aria-hidden="true" tabindex="-1"></a><span class="co"># overall pct of subjects who matched their goal</span></span>
<span id="cb77-225"><a href="#cb77-225" aria-hidden="true" tabindex="-1"></a>s2_agg4 <span class="sc">|&gt;</span> <span class="fu">ungroup</span>() <span class="sc">|&gt;</span></span>
<span id="cb77-226"><a href="#cb77-226" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb77-227"><a href="#cb77-227" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(pct),</span>
<span id="cb77-228"><a href="#cb77-228" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(pct),</span>
<span id="cb77-229"><a href="#cb77-229" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb77-230"><a href="#cb77-230" aria-hidden="true" tabindex="-1"></a>    <span class="at">se=</span><span class="fu">sd</span>(pct)<span class="sc">/</span><span class="fu">sqrt</span>(n)</span>
<span id="cb77-231"><a href="#cb77-231" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> pander<span class="sc">::</span><span class="fu">pandoc.table</span>(<span class="at">caption=</span><span class="st">"Study 2: Proportion of participants who matched their goal overall"</span>)</span>
<span id="cb77-232"><a href="#cb77-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-233"><a href="#cb77-233" aria-hidden="true" tabindex="-1"></a><span class="co"># proportion matching vs close match</span></span>
<span id="cb77-234"><a href="#cb77-234" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-235"><a href="#cb77-235" aria-hidden="true" tabindex="-1"></a>s2_agg1 <span class="sc">|&gt;</span> <span class="fu">pivot_longer</span>(<span class="fu">c</span>(matched_goal,close_match),<span class="at">names_to=</span><span class="st">"match_type"</span>,<span class="at">values_to=</span><span class="st">"match"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb77-236"><a href="#cb77-236" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(id,match_type) <span class="sc">|&gt;</span></span>
<span id="cb77-237"><a href="#cb77-237" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">mg=</span><span class="fu">sum</span>(match),<span class="at">n=</span><span class="fu">n</span>(), <span class="at">pct=</span>mg<span class="sc">/</span>n) <span class="sc">|&gt;</span></span>
<span id="cb77-238"><a href="#cb77-238" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(match_type) <span class="sc">|&gt;</span></span>
<span id="cb77-239"><a href="#cb77-239" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb77-240"><a href="#cb77-240" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(pct),</span>
<span id="cb77-241"><a href="#cb77-241" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(pct),</span>
<span id="cb77-242"><a href="#cb77-242" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb77-243"><a href="#cb77-243" aria-hidden="true" tabindex="-1"></a>    <span class="at">se=</span><span class="fu">sd</span>(pct)<span class="sc">/</span><span class="fu">sqrt</span>(n)</span>
<span id="cb77-244"><a href="#cb77-244" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> pander<span class="sc">::</span><span class="fu">pandoc.table</span>(<span class="at">caption=</span><span class="st">"Study 2: Proportion of participants who matched their goal or were within 3% of their goal"</span>)</span>
<span id="cb77-245"><a href="#cb77-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-246"><a href="#cb77-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-247"><a href="#cb77-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-248"><a href="#cb77-248" aria-hidden="true" tabindex="-1"></a><span class="co"># refClass only </span></span>
<span id="cb77-249"><a href="#cb77-249" aria-hidden="true" tabindex="-1"></a>s2_agg4 <span class="sc">|&gt;</span> </span>
<span id="cb77-250"><a href="#cb77-250" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(refClass) <span class="sc">|&gt;</span> </span>
<span id="cb77-251"><a href="#cb77-251" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb77-252"><a href="#cb77-252" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(pct),</span>
<span id="cb77-253"><a href="#cb77-253" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(pct),</span>
<span id="cb77-254"><a href="#cb77-254" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb77-255"><a href="#cb77-255" aria-hidden="true" tabindex="-1"></a>    <span class="at">se=</span><span class="fu">sd</span>(pct)<span class="sc">/</span><span class="fu">sqrt</span>(n)</span>
<span id="cb77-256"><a href="#cb77-256" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> pander<span class="sc">::</span><span class="fu">pandoc.table</span>(<span class="at">caption=</span><span class="st">"Study 2: Proportion of participants who matched their goal by condition"</span>)</span>
<span id="cb77-257"><a href="#cb77-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-258"><a href="#cb77-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-259"><a href="#cb77-259" aria-hidden="true" tabindex="-1"></a><span class="co"># rounded only</span></span>
<span id="cb77-260"><a href="#cb77-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-261"><a href="#cb77-261" aria-hidden="true" tabindex="-1"></a>s2_agg1 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(id,rounded) <span class="sc">|&gt;</span> </span>
<span id="cb77-262"><a href="#cb77-262" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mg=</span><span class="fu">sum</span>(matched_goal),<span class="at">n=</span><span class="fu">n</span>(), <span class="at">pct=</span>mg<span class="sc">/</span>n) <span class="sc">|&gt;</span> </span>
<span id="cb77-263"><a href="#cb77-263" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(rounded) <span class="sc">|&gt;</span></span>
<span id="cb77-264"><a href="#cb77-264" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb77-265"><a href="#cb77-265" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(pct),</span>
<span id="cb77-266"><a href="#cb77-266" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(pct),</span>
<span id="cb77-267"><a href="#cb77-267" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb77-268"><a href="#cb77-268" aria-hidden="true" tabindex="-1"></a>    <span class="at">se=</span><span class="fu">sd</span>(pct)<span class="sc">/</span><span class="fu">sqrt</span>(n)</span>
<span id="cb77-269"><a href="#cb77-269" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> pander<span class="sc">::</span><span class="fu">pandoc.table</span>(<span class="at">caption=</span><span class="st">"Study 2: Proportion of participants who matched their goal by rounding condition"</span>)</span>
<span id="cb77-270"><a href="#cb77-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-271"><a href="#cb77-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-272"><a href="#cb77-272" aria-hidden="true" tabindex="-1"></a><span class="co"># pct_goal only</span></span>
<span id="cb77-273"><a href="#cb77-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-274"><a href="#cb77-274" aria-hidden="true" tabindex="-1"></a>s2_agg1 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(id,pct_goal) <span class="sc">|&gt;</span> </span>
<span id="cb77-275"><a href="#cb77-275" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mg=</span><span class="fu">sum</span>(matched_goal),<span class="at">n=</span><span class="fu">n</span>(), <span class="at">pct=</span>mg<span class="sc">/</span>n) <span class="sc">|&gt;</span> </span>
<span id="cb77-276"><a href="#cb77-276" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(pct_goal) <span class="sc">|&gt;</span></span>
<span id="cb77-277"><a href="#cb77-277" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb77-278"><a href="#cb77-278" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(pct),</span>
<span id="cb77-279"><a href="#cb77-279" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(pct),</span>
<span id="cb77-280"><a href="#cb77-280" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb77-281"><a href="#cb77-281" aria-hidden="true" tabindex="-1"></a>    <span class="at">se=</span><span class="fu">sd</span>(pct)<span class="sc">/</span><span class="fu">sqrt</span>(n)</span>
<span id="cb77-282"><a href="#cb77-282" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> pander<span class="sc">::</span><span class="fu">pandoc.table</span>(<span class="at">caption=</span><span class="st">"Study 2: Proportion of participants who matched their goal by goal condition"</span>)</span>
<span id="cb77-283"><a href="#cb77-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-284"><a href="#cb77-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-285"><a href="#cb77-285" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-286"><a href="#cb77-286" aria-hidden="true" tabindex="-1"></a><span class="co"># refClass x rounded</span></span>
<span id="cb77-287"><a href="#cb77-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-288"><a href="#cb77-288" aria-hidden="true" tabindex="-1"></a>s2_agg1 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(id, refClass,rounded) <span class="sc">|&gt;</span> </span>
<span id="cb77-289"><a href="#cb77-289" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mg=</span><span class="fu">sum</span>(matched_goal),<span class="at">n=</span><span class="fu">n</span>(), <span class="at">pct=</span>mg<span class="sc">/</span>n) <span class="sc">|&gt;</span> </span>
<span id="cb77-290"><a href="#cb77-290" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(refClass,rounded) <span class="sc">|&gt;</span></span>
<span id="cb77-291"><a href="#cb77-291" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb77-292"><a href="#cb77-292" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(pct),</span>
<span id="cb77-293"><a href="#cb77-293" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(pct),</span>
<span id="cb77-294"><a href="#cb77-294" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb77-295"><a href="#cb77-295" aria-hidden="true" tabindex="-1"></a>    <span class="at">se=</span><span class="fu">sd</span>(pct)<span class="sc">/</span><span class="fu">sqrt</span>(n)</span>
<span id="cb77-296"><a href="#cb77-296" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> pander<span class="sc">::</span><span class="fu">pandoc.table</span>(<span class="at">caption=</span><span class="st">"Study 2: Proportion of participants who matched their goal by condition and rounding"</span>)</span>
<span id="cb77-297"><a href="#cb77-297" aria-hidden="true" tabindex="-1"></a>  </span>
<span id="cb77-298"><a href="#cb77-298" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-299"><a href="#cb77-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-300"><a href="#cb77-300" aria-hidden="true" tabindex="-1"></a><span class="co"># refClass x pct_goal</span></span>
<span id="cb77-301"><a href="#cb77-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-302"><a href="#cb77-302" aria-hidden="true" tabindex="-1"></a>s2_agg1 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(id, refClass,pct_goal) <span class="sc">|&gt;</span> </span>
<span id="cb77-303"><a href="#cb77-303" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mg=</span><span class="fu">sum</span>(matched_goal),<span class="at">n=</span><span class="fu">n</span>(), <span class="at">pct=</span>mg<span class="sc">/</span>n) <span class="sc">|&gt;</span> </span>
<span id="cb77-304"><a href="#cb77-304" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(refClass,pct_goal) <span class="sc">|&gt;</span></span>
<span id="cb77-305"><a href="#cb77-305" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb77-306"><a href="#cb77-306" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(pct),</span>
<span id="cb77-307"><a href="#cb77-307" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(pct),</span>
<span id="cb77-308"><a href="#cb77-308" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb77-309"><a href="#cb77-309" aria-hidden="true" tabindex="-1"></a>    <span class="at">se=</span><span class="fu">sd</span>(pct)<span class="sc">/</span><span class="fu">sqrt</span>(n)</span>
<span id="cb77-310"><a href="#cb77-310" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> pander<span class="sc">::</span><span class="fu">pandoc.table</span>(<span class="at">caption=</span><span class="st">"Study 2: Proportion of participants who matched their goal by condition and goal"</span>)</span>
<span id="cb77-311"><a href="#cb77-311" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-312"><a href="#cb77-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-313"><a href="#cb77-313" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-314"><a href="#cb77-314" aria-hidden="true" tabindex="-1"></a><span class="co"># pct_goal x rounded</span></span>
<span id="cb77-315"><a href="#cb77-315" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-316"><a href="#cb77-316" aria-hidden="true" tabindex="-1"></a>s2_agg1 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(id, pct_goal,rounded) <span class="sc">|&gt;</span> </span>
<span id="cb77-317"><a href="#cb77-317" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mg=</span><span class="fu">sum</span>(matched_goal),<span class="at">n=</span><span class="fu">n</span>(), <span class="at">pct=</span>mg<span class="sc">/</span>n) <span class="sc">|&gt;</span> </span>
<span id="cb77-318"><a href="#cb77-318" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(pct_goal,rounded) <span class="sc">|&gt;</span></span>
<span id="cb77-319"><a href="#cb77-319" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb77-320"><a href="#cb77-320" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(pct),</span>
<span id="cb77-321"><a href="#cb77-321" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(pct),</span>
<span id="cb77-322"><a href="#cb77-322" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb77-323"><a href="#cb77-323" aria-hidden="true" tabindex="-1"></a>    <span class="at">se=</span><span class="fu">sd</span>(pct)<span class="sc">/</span><span class="fu">sqrt</span>(n)</span>
<span id="cb77-324"><a href="#cb77-324" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> pander<span class="sc">::</span><span class="fu">pandoc.table</span>(<span class="at">caption=</span><span class="st">"Study 2: Proportion of participants who matched their goal by goal and rounding"</span>)</span>
<span id="cb77-325"><a href="#cb77-325" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-326"><a href="#cb77-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-327"><a href="#cb77-327" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-328"><a href="#cb77-328" aria-hidden="true" tabindex="-1"></a><span class="co"># pct_goal x rounded x refClass</span></span>
<span id="cb77-329"><a href="#cb77-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-330"><a href="#cb77-330" aria-hidden="true" tabindex="-1"></a>s2_agg1 <span class="sc">|&gt;</span> <span class="fu">group_by</span>(id, pct_goal,rounded,refClass) <span class="sc">|&gt;</span> </span>
<span id="cb77-331"><a href="#cb77-331" aria-hidden="true" tabindex="-1"></a>  <span class="fu">summarise</span>(<span class="at">mg=</span><span class="fu">sum</span>(matched_goal),<span class="at">n=</span><span class="fu">n</span>(), <span class="at">pct=</span>mg<span class="sc">/</span>n) <span class="sc">|&gt;</span> </span>
<span id="cb77-332"><a href="#cb77-332" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(pct_goal,rounded,refClass) <span class="sc">|&gt;</span></span>
<span id="cb77-333"><a href="#cb77-333" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb77-334"><a href="#cb77-334" aria-hidden="true" tabindex="-1"></a>    <span class="at">mean =</span> <span class="fu">mean</span>(pct),</span>
<span id="cb77-335"><a href="#cb77-335" aria-hidden="true" tabindex="-1"></a>    <span class="at">sd =</span> <span class="fu">sd</span>(pct),</span>
<span id="cb77-336"><a href="#cb77-336" aria-hidden="true" tabindex="-1"></a>    <span class="at">n =</span> <span class="fu">n</span>(),</span>
<span id="cb77-337"><a href="#cb77-337" aria-hidden="true" tabindex="-1"></a>    <span class="at">se=</span><span class="fu">sd</span>(pct)<span class="sc">/</span><span class="fu">sqrt</span>(n)</span>
<span id="cb77-338"><a href="#cb77-338" aria-hidden="true" tabindex="-1"></a>) <span class="sc">|&gt;</span> pander<span class="sc">::</span><span class="fu">pandoc.table</span>(<span class="at">caption=</span><span class="st">"Study 2: Proportion of participants who matched their goal by goal, rounding, and condition"</span>)</span>
<span id="cb77-339"><a href="#cb77-339" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-340"><a href="#cb77-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-341"><a href="#cb77-341" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-342"><a href="#cb77-342" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-343"><a href="#cb77-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-344"><a href="#cb77-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-345"><a href="#cb77-345" aria-hidden="true" tabindex="-1"></a><span class="fu">## Analysis</span></span>
<span id="cb77-346"><a href="#cb77-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-347"><a href="#cb77-347" aria-hidden="true" tabindex="-1"></a><span class="fu">### Study 1</span></span>
<span id="cb77-348"><a href="#cb77-348" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-351"><a href="#cb77-351" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-352"><a href="#cb77-352" aria-hidden="true" tabindex="-1"></a><span class="co"># binomial regression on trial level data</span></span>
<span id="cb77-353"><a href="#cb77-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-354"><a href="#cb77-354" aria-hidden="true" tabindex="-1"></a>s1_br <span class="ot">&lt;-</span> <span class="fu">brm</span>(</span>
<span id="cb77-355"><a href="#cb77-355" aria-hidden="true" tabindex="-1"></a>    matched_goal <span class="sc">~</span> refClass <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>id),</span>
<span id="cb77-356"><a href="#cb77-356" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> s1_agg,</span>
<span id="cb77-357"><a href="#cb77-357" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="fu">bernoulli</span>(),</span>
<span id="cb77-358"><a href="#cb77-358" aria-hidden="true" tabindex="-1"></a>    <span class="at">cores=</span><span class="dv">4</span>,</span>
<span id="cb77-359"><a href="#cb77-359" aria-hidden="true" tabindex="-1"></a>    <span class="at">iter=</span><span class="dv">2000</span>,</span>
<span id="cb77-360"><a href="#cb77-360" aria-hidden="true" tabindex="-1"></a>    <span class="at">control =</span> <span class="fu">list</span>(<span class="at">adapt_delta =</span> <span class="fl">0.99</span>),</span>
<span id="cb77-361"><a href="#cb77-361" aria-hidden="true" tabindex="-1"></a>    <span class="at">file=</span><span class="fu">paste0</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/model_cache"</span>,<span class="st">'s1_br.rds'</span>)),</span>
<span id="cb77-362"><a href="#cb77-362" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb77-363"><a href="#cb77-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-364"><a href="#cb77-364" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(s1_br)</span>
<span id="cb77-365"><a href="#cb77-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-366"><a href="#cb77-366" aria-hidden="true" tabindex="-1"></a>mr_s1 <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">describe_posterior</span>(s1_br, <span class="at">centrality =</span> <span class="st">"Mean"</span>))[, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>)]</span>
<span id="cb77-367"><a href="#cb77-367" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(mr_s1) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Term"</span>, <span class="st">"Estimate"</span>,<span class="st">"95% CrI Lower"</span>, <span class="st">"95% CrI Upper"</span>, <span class="st">"pd"</span>)</span>
<span id="cb77-368"><a href="#cb77-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-369"><a href="#cb77-369" aria-hidden="true" tabindex="-1"></a>intercept <span class="ot">&lt;-</span> mr_s1<span class="sc">$</span>Estimate[mr_s1<span class="sc">$</span>Term <span class="sc">==</span> <span class="st">"b_Intercept"</span>]</span>
<span id="cb77-370"><a href="#cb77-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-371"><a href="#cb77-371" aria-hidden="true" tabindex="-1"></a> mr_s1 <span class="sc">|&gt;</span></span>
<span id="cb77-372"><a href="#cb77-372" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Term =</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(Term, <span class="st">"b_"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb77-373"><a href="#cb77-373" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">c</span>(<span class="st">"Estimate"</span>, <span class="st">"95% CrI Lower"</span>, <span class="st">"95% CrI Upper"</span>), </span>
<span id="cb77-374"><a href="#cb77-374" aria-hidden="true" tabindex="-1"></a>                    \(x) <span class="fu">if_else</span>(Term <span class="sc">==</span> <span class="st">"Intercept"</span>, <span class="fu">plogis</span>(x), <span class="fu">plogis</span>(x <span class="sc">+</span> intercept)))) <span class="sc">|&gt;</span></span>
<span id="cb77-375"><a href="#cb77-375" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), \(x) <span class="fu">round</span>(x, <span class="dv">3</span>))) <span class="sc">|&gt;</span></span>
<span id="cb77-376"><a href="#cb77-376" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Term =</span> <span class="fu">if_else</span>(Term <span class="sc">==</span> <span class="st">"Intercept"</span>, <span class="st">"Intercept (kWh)"</span>, Term)) <span class="sc">|&gt;</span></span>
<span id="cb77-377"><a href="#cb77-377" aria-hidden="true" tabindex="-1"></a>    tibble<span class="sc">::</span><span class="fu">remove_rownames</span>() <span class="sc">|&gt;</span></span>
<span id="cb77-378"><a href="#cb77-378" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kable</span>(<span class="at">booktabs =</span> <span class="cn">TRUE</span>)</span>
<span id="cb77-379"><a href="#cb77-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-380"><a href="#cb77-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-381"><a href="#cb77-381" aria-hidden="true" tabindex="-1"></a>s1_br2 <span class="ot">&lt;-</span> <span class="fu">brm</span>(</span>
<span id="cb77-382"><a href="#cb77-382" aria-hidden="true" tabindex="-1"></a>    close_match <span class="sc">~</span> refClass <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>id) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>state),</span>
<span id="cb77-383"><a href="#cb77-383" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> s1_agg,</span>
<span id="cb77-384"><a href="#cb77-384" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="fu">bernoulli</span>(),</span>
<span id="cb77-385"><a href="#cb77-385" aria-hidden="true" tabindex="-1"></a>    <span class="at">cores=</span><span class="dv">4</span>,</span>
<span id="cb77-386"><a href="#cb77-386" aria-hidden="true" tabindex="-1"></a>    <span class="at">iter=</span><span class="dv">2000</span>,</span>
<span id="cb77-387"><a href="#cb77-387" aria-hidden="true" tabindex="-1"></a>    <span class="at">control =</span> <span class="fu">list</span>(<span class="at">adapt_delta =</span> <span class="fl">0.99</span>),</span>
<span id="cb77-388"><a href="#cb77-388" aria-hidden="true" tabindex="-1"></a>    <span class="at">file=</span><span class="fu">paste0</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/model_cache"</span>,<span class="st">'s1_br2.rds'</span>)),</span>
<span id="cb77-389"><a href="#cb77-389" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb77-390"><a href="#cb77-390" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(s1_br2)</span>
<span id="cb77-391"><a href="#cb77-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-392"><a href="#cb77-392" aria-hidden="true" tabindex="-1"></a>s1_br2 <span class="sc">|&gt;</span> <span class="fu">emmeans</span>(<span class="sc">~</span>refClass, <span class="at">type=</span><span class="st">"response"</span>)</span>
<span id="cb77-393"><a href="#cb77-393" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-394"><a href="#cb77-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-395"><a href="#cb77-395" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-396"><a href="#cb77-396" aria-hidden="true" tabindex="-1"></a>s1_agg <span class="ot">&lt;-</span> s1 <span class="sc">|&gt;</span> </span>
<span id="cb77-397"><a href="#cb77-397" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(appliance <span class="sc">!=</span><span class="st">"Total kWh"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb77-398"><a href="#cb77-398" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(id,refClass,state,block,plan,calc,edu,pct_goal) <span class="sc">|&gt;</span> </span>
<span id="cb77-399"><a href="#cb77-399" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">total_kWh =</span> <span class="fu">sum</span>(value),<span class="at">orig_kWh=</span><span class="fu">sum</span>(family), </span>
<span id="cb77-400"><a href="#cb77-400" aria-hidden="true" tabindex="-1"></a>                <span class="at">pct_change =</span> <span class="fu">round</span>((orig_kWh<span class="sc">-</span>total_kWh)<span class="sc">/</span>orig_kWh,<span class="dv">3</span>), </span>
<span id="cb77-401"><a href="#cb77-401" aria-hidden="true" tabindex="-1"></a>                <span class="at">n_change =</span> <span class="fu">sum</span>(value<span class="sc">!=</span>family),</span>
<span id="cb77-402"><a href="#cb77-402" aria-hidden="true" tabindex="-1"></a>                <span class="at">state_p_dif=</span><span class="fu">mean</span>(state_p_dif),</span>
<span id="cb77-403"><a href="#cb77-403" aria-hidden="true" tabindex="-1"></a>                <span class="at">state_f_dif=</span><span class="fu">mean</span>(state_f_dif),</span>
<span id="cb77-404"><a href="#cb77-404" aria-hidden="true" tabindex="-1"></a>                <span class="at">n_less_avg =</span> <span class="fu">sum</span>(less_avg),</span>
<span id="cb77-405"><a href="#cb77-405" aria-hidden="true" tabindex="-1"></a>                <span class="at">duration=</span><span class="fu">first</span>(Duration__in_seconds_)) <span class="sc">|&gt;</span> </span>
<span id="cb77-406"><a href="#cb77-406" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">matched_goal =</span> (pct_change <span class="sc">==</span> pct_goal), </span>
<span id="cb77-407"><a href="#cb77-407" aria-hidden="true" tabindex="-1"></a>                <span class="at">error =</span> pct_change <span class="sc">-</span> pct_goal,</span>
<span id="cb77-408"><a href="#cb77-408" aria-hidden="true" tabindex="-1"></a>                <span class="at">abs_error =</span> <span class="fu">abs</span>(error),</span>
<span id="cb77-409"><a href="#cb77-409" aria-hidden="true" tabindex="-1"></a>                <span class="at">close_match =</span> abs_error <span class="sc">&lt;=</span> <span class="fl">0.03</span>) <span class="sc">|&gt;</span></span>
<span id="cb77-410"><a href="#cb77-410" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> <span class="co"># Add ungroup here</span></span>
<span id="cb77-411"><a href="#cb77-411" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(</span>
<span id="cb77-412"><a href="#cb77-412" aria-hidden="true" tabindex="-1"></a>        <span class="at">accuracy_level =</span> <span class="fu">factor</span>(</span>
<span id="cb77-413"><a href="#cb77-413" aria-hidden="true" tabindex="-1"></a>            <span class="fu">case_when</span>(</span>
<span id="cb77-414"><a href="#cb77-414" aria-hidden="true" tabindex="-1"></a>                abs_error <span class="sc">&lt;=</span> <span class="fl">0.01</span> <span class="sc">~</span> <span class="st">"1% or less"</span>,</span>
<span id="cb77-415"><a href="#cb77-415" aria-hidden="true" tabindex="-1"></a>                abs_error <span class="sc">&lt;=</span> <span class="fl">0.05</span> <span class="sc">~</span> <span class="st">"5% or less"</span>,</span>
<span id="cb77-416"><a href="#cb77-416" aria-hidden="true" tabindex="-1"></a>                abs_error <span class="sc">&lt;=</span> <span class="fl">0.10</span> <span class="sc">~</span> <span class="st">"10% or less"</span>,</span>
<span id="cb77-417"><a href="#cb77-417" aria-hidden="true" tabindex="-1"></a>                <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Greater than 10%"</span>  <span class="co"># Capture all remaining cases</span></span>
<span id="cb77-418"><a href="#cb77-418" aria-hidden="true" tabindex="-1"></a>            ), </span>
<span id="cb77-419"><a href="#cb77-419" aria-hidden="true" tabindex="-1"></a>            <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"1% or less"</span>, <span class="st">"5% or less"</span>, <span class="st">"10% or less"</span>, <span class="st">"Greater than 10%"</span>),</span>
<span id="cb77-420"><a href="#cb77-420" aria-hidden="true" tabindex="-1"></a>            <span class="at">ordered =</span> <span class="cn">TRUE</span></span>
<span id="cb77-421"><a href="#cb77-421" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb77-422"><a href="#cb77-422" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb77-423"><a href="#cb77-423" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-424"><a href="#cb77-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-425"><a href="#cb77-425" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-426"><a href="#cb77-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-427"><a href="#cb77-427" aria-hidden="true" tabindex="-1"></a><span class="fu">## Ordinal Regression alternative</span></span>
<span id="cb77-428"><a href="#cb77-428" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-431"><a href="#cb77-431" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-432"><a href="#cb77-432" aria-hidden="true" tabindex="-1"></a>s1_agg <span class="ot">&lt;-</span> s1 <span class="sc">|&gt;</span> </span>
<span id="cb77-433"><a href="#cb77-433" aria-hidden="true" tabindex="-1"></a>    <span class="fu">filter</span>(appliance <span class="sc">!=</span><span class="st">"Total kWh"</span>) <span class="sc">|&gt;</span> </span>
<span id="cb77-434"><a href="#cb77-434" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(id,refClass,state,block,plan,calc,edu,pct_goal) <span class="sc">|&gt;</span> </span>
<span id="cb77-435"><a href="#cb77-435" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(<span class="at">total_kWh =</span> <span class="fu">sum</span>(value),<span class="at">orig_kWh=</span><span class="fu">sum</span>(family), </span>
<span id="cb77-436"><a href="#cb77-436" aria-hidden="true" tabindex="-1"></a>                <span class="at">pct_change =</span> <span class="fu">round</span>((orig_kWh<span class="sc">-</span>total_kWh)<span class="sc">/</span>orig_kWh,<span class="dv">3</span>), </span>
<span id="cb77-437"><a href="#cb77-437" aria-hidden="true" tabindex="-1"></a>                <span class="at">n_change =</span> <span class="fu">sum</span>(value<span class="sc">!=</span>family),</span>
<span id="cb77-438"><a href="#cb77-438" aria-hidden="true" tabindex="-1"></a>                <span class="at">state_p_dif=</span><span class="fu">mean</span>(state_p_dif),</span>
<span id="cb77-439"><a href="#cb77-439" aria-hidden="true" tabindex="-1"></a>                <span class="at">state_f_dif=</span><span class="fu">mean</span>(state_f_dif),</span>
<span id="cb77-440"><a href="#cb77-440" aria-hidden="true" tabindex="-1"></a>                <span class="at">n_less_avg =</span> <span class="fu">sum</span>(less_avg),</span>
<span id="cb77-441"><a href="#cb77-441" aria-hidden="true" tabindex="-1"></a>                <span class="at">duration=</span><span class="fu">first</span>(Duration__in_seconds_)) <span class="sc">|&gt;</span> </span>
<span id="cb77-442"><a href="#cb77-442" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">matched_goal =</span> (pct_change <span class="sc">==</span> pct_goal), </span>
<span id="cb77-443"><a href="#cb77-443" aria-hidden="true" tabindex="-1"></a>                <span class="at">error =</span> pct_change <span class="sc">-</span> pct_goal,</span>
<span id="cb77-444"><a href="#cb77-444" aria-hidden="true" tabindex="-1"></a>                <span class="at">abs_error =</span> <span class="fu">abs</span>(error),</span>
<span id="cb77-445"><a href="#cb77-445" aria-hidden="true" tabindex="-1"></a>                <span class="at">close_match =</span> abs_error <span class="sc">&lt;=</span> <span class="fl">0.03</span>) <span class="sc">|&gt;</span></span>
<span id="cb77-446"><a href="#cb77-446" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ungroup</span>() <span class="sc">|&gt;</span> <span class="co"># Add ungroup here</span></span>
<span id="cb77-447"><a href="#cb77-447" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(</span>
<span id="cb77-448"><a href="#cb77-448" aria-hidden="true" tabindex="-1"></a>            <span class="at">accuracy_level =</span> <span class="fu">factor</span>(</span>
<span id="cb77-449"><a href="#cb77-449" aria-hidden="true" tabindex="-1"></a>                <span class="fu">case_when</span>(</span>
<span id="cb77-450"><a href="#cb77-450" aria-hidden="true" tabindex="-1"></a>                    abs_error <span class="sc">==</span> <span class="fl">0.00</span> <span class="sc">~</span> <span class="st">"Exact match"</span>,</span>
<span id="cb77-451"><a href="#cb77-451" aria-hidden="true" tabindex="-1"></a>                    abs_error <span class="sc">&lt;=</span> <span class="fl">0.02</span> <span class="sc">~</span> <span class="st">"0.01-2% error"</span>,</span>
<span id="cb77-452"><a href="#cb77-452" aria-hidden="true" tabindex="-1"></a>                    abs_error <span class="sc">&lt;=</span> <span class="fl">0.10</span> <span class="sc">~</span> <span class="st">"2.01-15% error"</span>,</span>
<span id="cb77-453"><a href="#cb77-453" aria-hidden="true" tabindex="-1"></a>                    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Over 15% error"</span>  <span class="co"># Capture all remaining cases</span></span>
<span id="cb77-454"><a href="#cb77-454" aria-hidden="true" tabindex="-1"></a>                ), </span>
<span id="cb77-455"><a href="#cb77-455" aria-hidden="true" tabindex="-1"></a>                <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Exact match"</span>, <span class="st">"0.01-2% error"</span>, <span class="st">"2.01-15% error"</span>, <span class="st">"Over 15% error"</span>),</span>
<span id="cb77-456"><a href="#cb77-456" aria-hidden="true" tabindex="-1"></a>                <span class="at">ordered =</span> <span class="cn">TRUE</span></span>
<span id="cb77-457"><a href="#cb77-457" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb77-458"><a href="#cb77-458" aria-hidden="true" tabindex="-1"></a>        )</span>
<span id="cb77-459"><a href="#cb77-459" aria-hidden="true" tabindex="-1"></a>    <span class="co"># mutate(</span></span>
<span id="cb77-460"><a href="#cb77-460" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     accuracy_level = factor(</span></span>
<span id="cb77-461"><a href="#cb77-461" aria-hidden="true" tabindex="-1"></a>    <span class="co">#         case_when(</span></span>
<span id="cb77-462"><a href="#cb77-462" aria-hidden="true" tabindex="-1"></a>    <span class="co">#             abs_error &lt;= 0.01 ~ "1% or less",</span></span>
<span id="cb77-463"><a href="#cb77-463" aria-hidden="true" tabindex="-1"></a>    <span class="co">#             abs_error &lt;= 0.05 ~ "5% or less",</span></span>
<span id="cb77-464"><a href="#cb77-464" aria-hidden="true" tabindex="-1"></a>    <span class="co">#             abs_error &lt;= 0.10 ~ "10% or less",</span></span>
<span id="cb77-465"><a href="#cb77-465" aria-hidden="true" tabindex="-1"></a>    <span class="co">#             TRUE ~ "Greater than 10%"  # Capture all remaining cases</span></span>
<span id="cb77-466"><a href="#cb77-466" aria-hidden="true" tabindex="-1"></a>    <span class="co">#         ), </span></span>
<span id="cb77-467"><a href="#cb77-467" aria-hidden="true" tabindex="-1"></a>    <span class="co">#         levels = c("1% or less", "5% or less", "10% or less", "Greater than 10%"),</span></span>
<span id="cb77-468"><a href="#cb77-468" aria-hidden="true" tabindex="-1"></a>    <span class="co">#         ordered = TRUE</span></span>
<span id="cb77-469"><a href="#cb77-469" aria-hidden="true" tabindex="-1"></a>    <span class="co">#     )</span></span>
<span id="cb77-470"><a href="#cb77-470" aria-hidden="true" tabindex="-1"></a>    <span class="co"># )</span></span>
<span id="cb77-471"><a href="#cb77-471" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-472"><a href="#cb77-472" aria-hidden="true" tabindex="-1"></a><span class="co"># plot accuracy level by refClass</span></span>
<span id="cb77-473"><a href="#cb77-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-474"><a href="#cb77-474" aria-hidden="true" tabindex="-1"></a>s1_agg <span class="sc">|&gt;</span> </span>
<span id="cb77-475"><a href="#cb77-475" aria-hidden="true" tabindex="-1"></a>        <span class="fu">mutate</span>(</span>
<span id="cb77-476"><a href="#cb77-476" aria-hidden="true" tabindex="-1"></a>            <span class="at">accuracy_level =</span> <span class="fu">factor</span>(</span>
<span id="cb77-477"><a href="#cb77-477" aria-hidden="true" tabindex="-1"></a>                <span class="fu">case_when</span>(</span>
<span id="cb77-478"><a href="#cb77-478" aria-hidden="true" tabindex="-1"></a>                    abs_error <span class="sc">==</span> <span class="fl">0.00</span> <span class="sc">~</span> <span class="st">"Exact match"</span>,</span>
<span id="cb77-479"><a href="#cb77-479" aria-hidden="true" tabindex="-1"></a>                    abs_error <span class="sc">&lt;=</span> <span class="fl">0.02</span> <span class="sc">~</span> <span class="st">"0.01-2% error"</span>,</span>
<span id="cb77-480"><a href="#cb77-480" aria-hidden="true" tabindex="-1"></a>                    abs_error <span class="sc">&lt;=</span> <span class="fl">0.10</span> <span class="sc">~</span> <span class="st">"2.01-15% error"</span>,</span>
<span id="cb77-481"><a href="#cb77-481" aria-hidden="true" tabindex="-1"></a>                    <span class="cn">TRUE</span> <span class="sc">~</span> <span class="st">"Over 15% error"</span>  <span class="co"># Capture all remaining cases</span></span>
<span id="cb77-482"><a href="#cb77-482" aria-hidden="true" tabindex="-1"></a>                ), </span>
<span id="cb77-483"><a href="#cb77-483" aria-hidden="true" tabindex="-1"></a>                <span class="at">levels =</span> <span class="fu">c</span>(<span class="st">"Exact match"</span>, <span class="st">"0.01-2% error"</span>, <span class="st">"2.01-15% error"</span>, <span class="st">"Over 15% error"</span>),</span>
<span id="cb77-484"><a href="#cb77-484" aria-hidden="true" tabindex="-1"></a>                <span class="at">ordered =</span> <span class="cn">TRUE</span></span>
<span id="cb77-485"><a href="#cb77-485" aria-hidden="true" tabindex="-1"></a>            )</span>
<span id="cb77-486"><a href="#cb77-486" aria-hidden="true" tabindex="-1"></a>        ) <span class="sc">|&gt;</span></span>
<span id="cb77-487"><a href="#cb77-487" aria-hidden="true" tabindex="-1"></a>    <span class="fu">ggplot</span>(<span class="fu">aes</span>(<span class="at">x=</span>refClass,<span class="at">fill=</span>accuracy_level)) <span class="sc">+</span></span>
<span id="cb77-488"><a href="#cb77-488" aria-hidden="true" tabindex="-1"></a>    <span class="fu">geom_bar</span>(<span class="at">position=</span><span class="st">"fill"</span>) <span class="sc">+</span></span>
<span id="cb77-489"><a href="#cb77-489" aria-hidden="true" tabindex="-1"></a>    <span class="fu">labs</span>(<span class="at">title=</span><span class="st">"Study 1: Accuracy Level by Reference Class"</span>,</span>
<span id="cb77-490"><a href="#cb77-490" aria-hidden="true" tabindex="-1"></a>        <span class="at">x=</span><span class="st">"Reference Class"</span>,</span>
<span id="cb77-491"><a href="#cb77-491" aria-hidden="true" tabindex="-1"></a>        <span class="at">y=</span><span class="st">"Proportion"</span>,</span>
<span id="cb77-492"><a href="#cb77-492" aria-hidden="true" tabindex="-1"></a>        <span class="at">fill=</span><span class="st">"Accuracy Level"</span>) <span class="sc">+</span></span>
<span id="cb77-493"><a href="#cb77-493" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb77-494"><a href="#cb77-494" aria-hidden="true" tabindex="-1"></a>    <span class="fu">theme</span>(<span class="at">axis.text.x =</span> <span class="fu">element_text</span>(<span class="at">angle =</span> <span class="dv">45</span>, <span class="at">hjust =</span> <span class="dv">1</span>))</span>
<span id="cb77-495"><a href="#cb77-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-496"><a href="#cb77-496" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-497"><a href="#cb77-497" aria-hidden="true" tabindex="-1"></a>ordinal_model_s1 <span class="ot">&lt;-</span> <span class="fu">brm</span>(</span>
<span id="cb77-498"><a href="#cb77-498" aria-hidden="true" tabindex="-1"></a>  accuracy_level <span class="sc">~</span> refClass <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>id) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>state),</span>
<span id="cb77-499"><a href="#cb77-499" aria-hidden="true" tabindex="-1"></a>  <span class="at">data =</span> s1_agg,</span>
<span id="cb77-500"><a href="#cb77-500" aria-hidden="true" tabindex="-1"></a>  <span class="at">family =</span> <span class="fu">cumulative</span>(<span class="st">"logit"</span>),</span>
<span id="cb77-501"><a href="#cb77-501" aria-hidden="true" tabindex="-1"></a>  <span class="at">cores =</span> <span class="dv">4</span>,</span>
<span id="cb77-502"><a href="#cb77-502" aria-hidden="true" tabindex="-1"></a>  <span class="at">iter =</span> <span class="dv">2000</span>,</span>
<span id="cb77-503"><a href="#cb77-503" aria-hidden="true" tabindex="-1"></a>  <span class="at">control =</span> <span class="fu">list</span>(<span class="at">adapt_delta =</span> <span class="fl">0.99</span>), <span class="co"># Recommended for ordinal models</span></span>
<span id="cb77-504"><a href="#cb77-504" aria-hidden="true" tabindex="-1"></a>  <span class="at">prior =</span> <span class="fu">c</span>(<span class="fu">prior</span>(<span class="fu">normal</span>(<span class="dv">0</span>, <span class="dv">2</span>), <span class="at">class =</span> <span class="st">"Intercept"</span>),  <span class="co"># Priors for thresholds</span></span>
<span id="cb77-505"><a href="#cb77-505" aria-hidden="true" tabindex="-1"></a>            <span class="fu">prior</span>(<span class="fu">normal</span>(<span class="dv">0</span>, <span class="fl">1.5</span>), <span class="at">class =</span> <span class="st">"b"</span>)), <span class="co"># Priors for predictors</span></span>
<span id="cb77-506"><a href="#cb77-506" aria-hidden="true" tabindex="-1"></a>  <span class="at">file =</span> <span class="fu">paste0</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/model_cache"</span>,<span class="st">'s1_ordinal3.rds'</span>)) <span class="co"># Cache for efficiency</span></span>
<span id="cb77-507"><a href="#cb77-507" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb77-508"><a href="#cb77-508" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-509"><a href="#cb77-509" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-510"><a href="#cb77-510" aria-hidden="true" tabindex="-1"></a>pred_summary <span class="ot">&lt;-</span> ordinal_model_s1 <span class="sc">|&gt;</span></span>
<span id="cb77-511"><a href="#cb77-511" aria-hidden="true" tabindex="-1"></a>    <span class="fu">epred_draws</span>(<span class="at">newdata =</span> <span class="fu">data.frame</span>(<span class="at">refClass =</span> <span class="fu">c</span>(<span class="st">"kWh"</span>, <span class="st">"Percentage"</span>, <span class="st">"USD"</span>)),</span>
<span id="cb77-512"><a href="#cb77-512" aria-hidden="true" tabindex="-1"></a>                <span class="at">ndraws =</span> <span class="dv">1000</span>, <span class="at">re_formula =</span> <span class="cn">NA</span>) <span class="sc">|&gt;</span></span>
<span id="cb77-513"><a href="#cb77-513" aria-hidden="true" tabindex="-1"></a>    <span class="fu">group_by</span>(refClass, .category) <span class="sc">|&gt;</span></span>
<span id="cb77-514"><a href="#cb77-514" aria-hidden="true" tabindex="-1"></a>    <span class="fu">summarise</span>(</span>
<span id="cb77-515"><a href="#cb77-515" aria-hidden="true" tabindex="-1"></a>        <span class="at">mean_prob =</span> <span class="fu">mean</span>(.epred),</span>
<span id="cb77-516"><a href="#cb77-516" aria-hidden="true" tabindex="-1"></a>        <span class="at">lower_ci =</span> <span class="fu">quantile</span>(.epred, <span class="fl">0.025</span>),</span>
<span id="cb77-517"><a href="#cb77-517" aria-hidden="true" tabindex="-1"></a>        <span class="at">upper_ci =</span> <span class="fu">quantile</span>(.epred, <span class="fl">0.975</span>)</span>
<span id="cb77-518"><a href="#cb77-518" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb77-519"><a href="#cb77-519" aria-hidden="true" tabindex="-1"></a>pred_summary <span class="sc">|&gt;</span> pander<span class="sc">::</span><span class="fu">pandoc.table</span>(<span class="at">caption=</span><span class="st">"Study 1: Predicted probabilities of accuracy level by reference class"</span>)</span>
<span id="cb77-520"><a href="#cb77-520" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-521"><a href="#cb77-521" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pred_summary, </span>
<span id="cb77-522"><a href="#cb77-522" aria-hidden="true" tabindex="-1"></a>       <span class="fu">aes</span>(<span class="at">x =</span> refClass, <span class="at">y =</span> mean_prob, <span class="at">fill =</span> .category)) <span class="sc">+</span></span>
<span id="cb77-523"><a href="#cb77-523" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_col</span>(<span class="at">position =</span> <span class="st">"stack"</span>) <span class="sc">+</span></span>
<span id="cb77-524"><a href="#cb77-524" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower_ci, <span class="at">ymax =</span> upper_ci), </span>
<span id="cb77-525"><a href="#cb77-525" aria-hidden="true" tabindex="-1"></a>                <span class="at">position =</span> <span class="fu">position_stack</span>()) <span class="sc">+</span></span>
<span id="cb77-526"><a href="#cb77-526" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Reference Class"</span>, </span>
<span id="cb77-527"><a href="#cb77-527" aria-hidden="true" tabindex="-1"></a>       <span class="at">y =</span> <span class="st">"Predicted Probability"</span>,</span>
<span id="cb77-528"><a href="#cb77-528" aria-hidden="true" tabindex="-1"></a>       <span class="at">fill =</span> <span class="st">"Accuracy Level"</span>,</span>
<span id="cb77-529"><a href="#cb77-529" aria-hidden="true" tabindex="-1"></a>       <span class="at">title =</span> <span class="st">"Predicted Probabilities of Accuracy Levels by Reference Class"</span>) <span class="sc">+</span></span>
<span id="cb77-530"><a href="#cb77-530" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb77-531"><a href="#cb77-531" aria-hidden="true" tabindex="-1"></a>  <span class="fu">scale_fill_brewer</span>(<span class="at">palette =</span> <span class="st">"Blues"</span>)</span>
<span id="cb77-532"><a href="#cb77-532" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-533"><a href="#cb77-533" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate cumulative probabilities</span></span>
<span id="cb77-534"><a href="#cb77-534" aria-hidden="true" tabindex="-1"></a>cum_probs <span class="ot">&lt;-</span> pred_summary <span class="sc">|&gt;</span></span>
<span id="cb77-535"><a href="#cb77-535" aria-hidden="true" tabindex="-1"></a>  <span class="fu">group_by</span>(refClass) <span class="sc">|&gt;</span></span>
<span id="cb77-536"><a href="#cb77-536" aria-hidden="true" tabindex="-1"></a>  <span class="fu">arrange</span>(refClass, .category) <span class="sc">|&gt;</span></span>
<span id="cb77-537"><a href="#cb77-537" aria-hidden="true" tabindex="-1"></a>  <span class="fu">mutate</span>(</span>
<span id="cb77-538"><a href="#cb77-538" aria-hidden="true" tabindex="-1"></a>    <span class="at">cum_prob =</span> <span class="fu">cumsum</span>(mean_prob),</span>
<span id="cb77-539"><a href="#cb77-539" aria-hidden="true" tabindex="-1"></a>    <span class="at">cum_lower =</span> <span class="fu">cumsum</span>(lower_ci),</span>
<span id="cb77-540"><a href="#cb77-540" aria-hidden="true" tabindex="-1"></a>    <span class="at">cum_upper =</span> <span class="fu">cumsum</span>(upper_ci)</span>
<span id="cb77-541"><a href="#cb77-541" aria-hidden="true" tabindex="-1"></a>  )</span>
<span id="cb77-542"><a href="#cb77-542" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-543"><a href="#cb77-543" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(cum_probs, </span>
<span id="cb77-544"><a href="#cb77-544" aria-hidden="true" tabindex="-1"></a>    <span class="fu">aes</span>(<span class="at">x =</span> refClass, <span class="at">y =</span> cum_prob, <span class="at">color =</span> .category)) <span class="sc">+</span></span>
<span id="cb77-545"><a href="#cb77-545" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_point</span>(<span class="at">size =</span> <span class="dv">3</span>,<span class="at">position=</span><span class="fu">position_dodge</span>()) <span class="sc">+</span></span>
<span id="cb77-546"><a href="#cb77-546" aria-hidden="true" tabindex="-1"></a><span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> cum_lower, <span class="at">ymax =</span> cum_upper), </span>
<span id="cb77-547"><a href="#cb77-547" aria-hidden="true" tabindex="-1"></a>            <span class="at">width =</span> <span class="fl">0.2</span>,<span class="at">position=</span><span class="fu">position_dodge</span>()) <span class="sc">+</span></span>
<span id="cb77-548"><a href="#cb77-548" aria-hidden="true" tabindex="-1"></a><span class="fu">labs</span>(<span class="at">x =</span> <span class="st">"Reference Class"</span>,</span>
<span id="cb77-549"><a href="#cb77-549" aria-hidden="true" tabindex="-1"></a>    <span class="at">y =</span> <span class="st">"Cumulative Probability"</span>,</span>
<span id="cb77-550"><a href="#cb77-550" aria-hidden="true" tabindex="-1"></a>    <span class="at">color =</span> <span class="st">"Accuracy Level"</span>,</span>
<span id="cb77-551"><a href="#cb77-551" aria-hidden="true" tabindex="-1"></a>    <span class="at">title =</span> <span class="st">"Cumulative Probabilities of Accuracy Levels"</span>) <span class="sc">+</span></span>
<span id="cb77-552"><a href="#cb77-552" aria-hidden="true" tabindex="-1"></a><span class="fu">theme_minimal</span>() <span class="sc">+</span></span>
<span id="cb77-553"><a href="#cb77-553" aria-hidden="true" tabindex="-1"></a><span class="fu">scale_color_brewer</span>(<span class="at">palette =</span> <span class="st">"Blues"</span>) </span>
<span id="cb77-554"><a href="#cb77-554" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-555"><a href="#cb77-555" aria-hidden="true" tabindex="-1"></a>summary_table <span class="ot">&lt;-</span> pred_summary <span class="sc">|&gt;</span></span>
<span id="cb77-556"><a href="#cb77-556" aria-hidden="true" tabindex="-1"></a>  <span class="fu">pivot_wider</span>(</span>
<span id="cb77-557"><a href="#cb77-557" aria-hidden="true" tabindex="-1"></a>    <span class="at">names_from =</span> .category,</span>
<span id="cb77-558"><a href="#cb77-558" aria-hidden="true" tabindex="-1"></a>    <span class="at">values_from =</span> <span class="fu">c</span>(mean_prob, lower_ci, upper_ci)</span>
<span id="cb77-559"><a href="#cb77-559" aria-hidden="true" tabindex="-1"></a>  ) <span class="sc">|&gt;</span></span>
<span id="cb77-560"><a href="#cb77-560" aria-hidden="true" tabindex="-1"></a>  <span class="fu">kable</span>(<span class="at">digits =</span> <span class="dv">3</span>)</span>
<span id="cb77-561"><a href="#cb77-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-562"><a href="#cb77-562" aria-hidden="true" tabindex="-1"></a><span class="fu">print</span>(summary_table)</span>
<span id="cb77-563"><a href="#cb77-563" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-564"><a href="#cb77-564" aria-hidden="true" tabindex="-1"></a><span class="co"># Convert log-odds to odds ratios</span></span>
<span id="cb77-565"><a href="#cb77-565" aria-hidden="true" tabindex="-1"></a>posterior_samples <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(ordinal_model_s1)</span>
<span id="cb77-566"><a href="#cb77-566" aria-hidden="true" tabindex="-1"></a>odds_ratios <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb77-567"><a href="#cb77-567" aria-hidden="true" tabindex="-1"></a>  <span class="at">Percentage_vs_kWh =</span> <span class="fu">exp</span>(posterior_samples<span class="sc">$</span>b_refClassPercentage),</span>
<span id="cb77-568"><a href="#cb77-568" aria-hidden="true" tabindex="-1"></a>  <span class="at">USD_vs_kWh =</span> <span class="fu">exp</span>(posterior_samples<span class="sc">$</span>b_refClassUSD)</span>
<span id="cb77-569"><a href="#cb77-569" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb77-570"><a href="#cb77-570" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-571"><a href="#cb77-571" aria-hidden="true" tabindex="-1"></a><span class="co"># Calculate summary statistics</span></span>
<span id="cb77-572"><a href="#cb77-572" aria-hidden="true" tabindex="-1"></a>odds_ratio_summary <span class="ot">&lt;-</span> <span class="fu">data.frame</span>(</span>
<span id="cb77-573"><a href="#cb77-573" aria-hidden="true" tabindex="-1"></a>  <span class="at">comparison =</span> <span class="fu">c</span>(<span class="st">"Percentage vs kWh"</span>, <span class="st">"USD vs kWh"</span>),</span>
<span id="cb77-574"><a href="#cb77-574" aria-hidden="true" tabindex="-1"></a>  <span class="at">odds_ratio =</span> <span class="fu">c</span>(<span class="fu">mean</span>(odds_ratios<span class="sc">$</span>Percentage_vs_kWh),</span>
<span id="cb77-575"><a href="#cb77-575" aria-hidden="true" tabindex="-1"></a>                 <span class="fu">mean</span>(odds_ratios<span class="sc">$</span>USD_vs_kWh)),</span>
<span id="cb77-576"><a href="#cb77-576" aria-hidden="true" tabindex="-1"></a>  <span class="at">ci_lower =</span> <span class="fu">c</span>(<span class="fu">quantile</span>(odds_ratios<span class="sc">$</span>Percentage_vs_kWh, <span class="fl">0.025</span>),</span>
<span id="cb77-577"><a href="#cb77-577" aria-hidden="true" tabindex="-1"></a>               <span class="fu">quantile</span>(odds_ratios<span class="sc">$</span>USD_vs_kWh, <span class="fl">0.025</span>)),</span>
<span id="cb77-578"><a href="#cb77-578" aria-hidden="true" tabindex="-1"></a>  <span class="at">ci_upper =</span> <span class="fu">c</span>(<span class="fu">quantile</span>(odds_ratios<span class="sc">$</span>Percentage_vs_kWh, <span class="fl">0.975</span>),</span>
<span id="cb77-579"><a href="#cb77-579" aria-hidden="true" tabindex="-1"></a>               <span class="fu">quantile</span>(odds_ratios<span class="sc">$</span>USD_vs_kWh, <span class="fl">0.975</span>))</span>
<span id="cb77-580"><a href="#cb77-580" aria-hidden="true" tabindex="-1"></a>)</span>
<span id="cb77-581"><a href="#cb77-581" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-582"><a href="#cb77-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-583"><a href="#cb77-583" aria-hidden="true" tabindex="-1"></a><span class="co"># Plot predicted probabilities</span></span>
<span id="cb77-584"><a href="#cb77-584" aria-hidden="true" tabindex="-1"></a><span class="fu">ggplot</span>(pred_summary, <span class="fu">aes</span>(<span class="at">x =</span> refClass, <span class="at">y =</span> mean_prob, <span class="at">fill =</span> .category)) <span class="sc">+</span></span>
<span id="cb77-585"><a href="#cb77-585" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_bar</span>(<span class="at">stat =</span> <span class="st">"identity"</span>, <span class="at">position =</span> <span class="fu">position_dodge</span>()) <span class="sc">+</span></span>
<span id="cb77-586"><a href="#cb77-586" aria-hidden="true" tabindex="-1"></a>  <span class="fu">geom_errorbar</span>(<span class="fu">aes</span>(<span class="at">ymin =</span> lower_ci, <span class="at">ymax =</span> upper_ci),</span>
<span id="cb77-587"><a href="#cb77-587" aria-hidden="true" tabindex="-1"></a>                <span class="at">position =</span> <span class="fu">position_dodge</span>(<span class="at">width =</span> <span class="fl">0.9</span>), <span class="at">width =</span> <span class="fl">0.2</span>) <span class="sc">+</span></span>
<span id="cb77-588"><a href="#cb77-588" aria-hidden="true" tabindex="-1"></a>  <span class="fu">labs</span>(<span class="at">y =</span> <span class="st">"Predicted Probability"</span>, <span class="at">x =</span> <span class="st">"Reference Class"</span>, <span class="at">fill =</span> <span class="st">"Accuracy Level"</span>) <span class="sc">+</span></span>
<span id="cb77-589"><a href="#cb77-589" aria-hidden="true" tabindex="-1"></a>  <span class="fu">ggtitle</span>(<span class="st">"Study 1: Predicted Probabilities of Accuracy Level by Reference Class"</span>) <span class="sc">+</span></span>
<span id="cb77-590"><a href="#cb77-590" aria-hidden="true" tabindex="-1"></a>  <span class="fu">theme_minimal</span>()</span>
<span id="cb77-591"><a href="#cb77-591" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-592"><a href="#cb77-592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-593"><a href="#cb77-593" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-594"><a href="#cb77-594" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-595"><a href="#cb77-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-596"><a href="#cb77-596" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-597"><a href="#cb77-597" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-598"><a href="#cb77-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-599"><a href="#cb77-599" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-600"><a href="#cb77-600" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-601"><a href="#cb77-601" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-602"><a href="#cb77-602" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-603"><a href="#cb77-603" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-604"><a href="#cb77-604" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-605"><a href="#cb77-605" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-606"><a href="#cb77-606" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-607"><a href="#cb77-607" aria-hidden="true" tabindex="-1"></a><span class="fu">#### Frequentist alternative</span></span>
<span id="cb77-608"><a href="#cb77-608" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-611"><a href="#cb77-611" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-612"><a href="#cb77-612" aria-hidden="true" tabindex="-1"></a>s1_glm <span class="ot">&lt;-</span> <span class="fu">glm</span>(matched_goal <span class="sc">~</span> refClass, <span class="at">data =</span> s1_agg, <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb77-613"><a href="#cb77-613" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(s1_glm)</span>
<span id="cb77-614"><a href="#cb77-614" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-615"><a href="#cb77-615" aria-hidden="true" tabindex="-1"></a><span class="co"># Odds Ratios and Confidence Intervals</span></span>
<span id="cb77-616"><a href="#cb77-616" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="fu">cbind</span>(<span class="at">Odds_Ratio =</span> <span class="fu">coef</span>(s1_glm), <span class="fu">confint</span>(s1_glm)))</span>
<span id="cb77-617"><a href="#cb77-617" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-618"><a href="#cb77-618" aria-hidden="true" tabindex="-1"></a><span class="co"># Chi-Square Test for Proportions in Study 1</span></span>
<span id="cb77-619"><a href="#cb77-619" aria-hidden="true" tabindex="-1"></a>s1_table <span class="ot">&lt;-</span> <span class="fu">table</span>(s1_agg<span class="sc">$</span>refClass, s1_agg<span class="sc">$</span>matched_goal)</span>
<span id="cb77-620"><a href="#cb77-620" aria-hidden="true" tabindex="-1"></a><span class="fu">chisq.test</span>(s1_table)</span>
<span id="cb77-621"><a href="#cb77-621" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-622"><a href="#cb77-622" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-623"><a href="#cb77-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-624"><a href="#cb77-624" aria-hidden="true" tabindex="-1"></a><span class="fu">### Study 2</span></span>
<span id="cb77-625"><a href="#cb77-625" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-628"><a href="#cb77-628" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-629"><a href="#cb77-629" aria-hidden="true" tabindex="-1"></a><span class="co"># binomial regression on trial level data</span></span>
<span id="cb77-630"><a href="#cb77-630" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-631"><a href="#cb77-631" aria-hidden="true" tabindex="-1"></a>s2_br_3 <span class="ot">&lt;-</span> <span class="fu">brm</span>(</span>
<span id="cb77-632"><a href="#cb77-632" aria-hidden="true" tabindex="-1"></a>    matched_goal <span class="sc">~</span> refClass<span class="sc">+</span>rounded<span class="sc">+</span>pct_goal <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>id) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>state),</span>
<span id="cb77-633"><a href="#cb77-633" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> s2_agg1,</span>
<span id="cb77-634"><a href="#cb77-634" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="fu">bernoulli</span>(),</span>
<span id="cb77-635"><a href="#cb77-635" aria-hidden="true" tabindex="-1"></a>    <span class="at">cores=</span><span class="dv">4</span>,</span>
<span id="cb77-636"><a href="#cb77-636" aria-hidden="true" tabindex="-1"></a>    <span class="at">iter=</span><span class="dv">2000</span>,</span>
<span id="cb77-637"><a href="#cb77-637" aria-hidden="true" tabindex="-1"></a>    <span class="at">control =</span> <span class="fu">list</span>(<span class="at">adapt_delta =</span> <span class="fl">0.99</span>),</span>
<span id="cb77-638"><a href="#cb77-638" aria-hidden="true" tabindex="-1"></a>    <span class="at">file=</span><span class="fu">paste0</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/model_cache"</span>,<span class="st">'s2_br_3.rds'</span>)),</span>
<span id="cb77-639"><a href="#cb77-639" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb77-640"><a href="#cb77-640" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-641"><a href="#cb77-641" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(s2_br_3)</span>
<span id="cb77-642"><a href="#cb77-642" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-643"><a href="#cb77-643" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-644"><a href="#cb77-644" aria-hidden="true" tabindex="-1"></a>mr_s2_3 <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">describe_posterior</span>(s2_br_3, <span class="at">centrality =</span> <span class="st">"Mean"</span>))[, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>)]</span>
<span id="cb77-645"><a href="#cb77-645" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(mr_s2_3) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Term"</span>, <span class="st">"Estimate"</span>,<span class="st">"95% CrI Lower"</span>, <span class="st">"95% CrI Upper"</span>, <span class="st">"pd"</span>)</span>
<span id="cb77-646"><a href="#cb77-646" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-647"><a href="#cb77-647" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-648"><a href="#cb77-648" aria-hidden="true" tabindex="-1"></a> mr_s2_3 <span class="sc">|&gt;</span></span>
<span id="cb77-649"><a href="#cb77-649" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Term =</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(Term, <span class="st">"b_"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb77-650"><a href="#cb77-650" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), \(x) <span class="fu">round</span>(x, <span class="dv">3</span>))) <span class="sc">|&gt;</span></span>
<span id="cb77-651"><a href="#cb77-651" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Term =</span> <span class="fu">if_else</span>(Term <span class="sc">==</span> <span class="st">"Intercept"</span>, <span class="st">"Intercept (kWh)"</span>, Term)) <span class="sc">|&gt;</span></span>
<span id="cb77-652"><a href="#cb77-652" aria-hidden="true" tabindex="-1"></a>    tibble<span class="sc">::</span><span class="fu">remove_rownames</span>() <span class="sc">|&gt;</span></span>
<span id="cb77-653"><a href="#cb77-653" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kable</span>(<span class="at">booktabs =</span> <span class="cn">TRUE</span>)</span>
<span id="cb77-654"><a href="#cb77-654" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-655"><a href="#cb77-655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-656"><a href="#cb77-656" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-657"><a href="#cb77-657" aria-hidden="true" tabindex="-1"></a>s2_br2_3 <span class="ot">&lt;-</span> <span class="fu">brm</span>(</span>
<span id="cb77-658"><a href="#cb77-658" aria-hidden="true" tabindex="-1"></a>    close_match <span class="sc">~</span> refClass<span class="sc">+</span>rounded<span class="sc">+</span>pct_goal <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>id) <span class="sc">+</span> (<span class="dv">1</span><span class="sc">|</span>state),</span>
<span id="cb77-659"><a href="#cb77-659" aria-hidden="true" tabindex="-1"></a>    <span class="at">data =</span> s2_agg1,</span>
<span id="cb77-660"><a href="#cb77-660" aria-hidden="true" tabindex="-1"></a>    <span class="at">family =</span> <span class="fu">bernoulli</span>(),</span>
<span id="cb77-661"><a href="#cb77-661" aria-hidden="true" tabindex="-1"></a>    <span class="at">cores=</span><span class="dv">4</span>,</span>
<span id="cb77-662"><a href="#cb77-662" aria-hidden="true" tabindex="-1"></a>    <span class="at">iter=</span><span class="dv">2000</span>,</span>
<span id="cb77-663"><a href="#cb77-663" aria-hidden="true" tabindex="-1"></a>    <span class="at">control =</span> <span class="fu">list</span>(<span class="at">adapt_delta =</span> <span class="fl">0.99</span>),</span>
<span id="cb77-664"><a href="#cb77-664" aria-hidden="true" tabindex="-1"></a>    <span class="at">file=</span><span class="fu">paste0</span>(here<span class="sc">::</span><span class="fu">here</span>(<span class="st">"data/model_cache"</span>,<span class="st">'s2_br2_3.rds'</span>)),</span>
<span id="cb77-665"><a href="#cb77-665" aria-hidden="true" tabindex="-1"></a>    )</span>
<span id="cb77-666"><a href="#cb77-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-667"><a href="#cb77-667" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(s2_br2_3)</span>
<span id="cb77-668"><a href="#cb77-668" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-669"><a href="#cb77-669" aria-hidden="true" tabindex="-1"></a><span class="co">#s2_br2_3 |&gt; emmeans(~refClass, type="response")</span></span>
<span id="cb77-670"><a href="#cb77-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-671"><a href="#cb77-671" aria-hidden="true" tabindex="-1"></a>mr_s2_3_2 <span class="ot">&lt;-</span> <span class="fu">as.data.frame</span>(<span class="fu">describe_posterior</span>(s2_br2_3, <span class="at">centrality =</span> <span class="st">"Mean"</span>))[, <span class="fu">c</span>(<span class="dv">1</span>,<span class="dv">2</span>,<span class="dv">4</span>,<span class="dv">5</span>,<span class="dv">6</span>)]</span>
<span id="cb77-672"><a href="#cb77-672" aria-hidden="true" tabindex="-1"></a><span class="fu">colnames</span>(mr_s2_3_2) <span class="ot">&lt;-</span> <span class="fu">c</span>(<span class="st">"Term"</span>, <span class="st">"Estimate"</span>,<span class="st">"95% CrI Lower"</span>, <span class="st">"95% CrI Upper"</span>, <span class="st">"pd"</span>)</span>
<span id="cb77-673"><a href="#cb77-673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-674"><a href="#cb77-674" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-675"><a href="#cb77-675" aria-hidden="true" tabindex="-1"></a>mr_s2_3_2 <span class="sc">|&gt;</span></span>
<span id="cb77-676"><a href="#cb77-676" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Term =</span> stringr<span class="sc">::</span><span class="fu">str_remove</span>(Term, <span class="st">"b_"</span>)) <span class="sc">|&gt;</span></span>
<span id="cb77-677"><a href="#cb77-677" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="fu">across</span>(<span class="fu">where</span>(is.numeric), \(x) <span class="fu">round</span>(x, <span class="dv">3</span>))) <span class="sc">|&gt;</span></span>
<span id="cb77-678"><a href="#cb77-678" aria-hidden="true" tabindex="-1"></a>    <span class="fu">mutate</span>(<span class="at">Term =</span> <span class="fu">if_else</span>(Term <span class="sc">==</span> <span class="st">"Intercept"</span>, <span class="st">"Intercept (kWh)"</span>, Term)) <span class="sc">|&gt;</span></span>
<span id="cb77-679"><a href="#cb77-679" aria-hidden="true" tabindex="-1"></a>    tibble<span class="sc">::</span><span class="fu">remove_rownames</span>() <span class="sc">|&gt;</span></span>
<span id="cb77-680"><a href="#cb77-680" aria-hidden="true" tabindex="-1"></a>    <span class="fu">kable</span>(<span class="at">booktabs =</span> <span class="cn">TRUE</span>)</span>
<span id="cb77-681"><a href="#cb77-681" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-682"><a href="#cb77-682" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
<span id="cb77-683"><a href="#cb77-683" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-684"><a href="#cb77-684" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-685"><a href="#cb77-685" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-688"><a href="#cb77-688" aria-hidden="true" tabindex="-1"></a><span class="in">```{r}</span></span>
<span id="cb77-689"><a href="#cb77-689" aria-hidden="true" tabindex="-1"></a>s2_glm <span class="ot">&lt;-</span> <span class="fu">glm</span>(matched_goal <span class="sc">~</span> refClass <span class="sc">+</span> rounded <span class="sc">+</span> pct_goal, <span class="at">data =</span> s2_agg1, <span class="at">family =</span> <span class="fu">binomial</span>())</span>
<span id="cb77-690"><a href="#cb77-690" aria-hidden="true" tabindex="-1"></a><span class="fu">summary</span>(s2_glm)</span>
<span id="cb77-691"><a href="#cb77-691" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-692"><a href="#cb77-692" aria-hidden="true" tabindex="-1"></a><span class="co"># Odds Ratios and Confidence Intervals</span></span>
<span id="cb77-693"><a href="#cb77-693" aria-hidden="true" tabindex="-1"></a><span class="fu">exp</span>(<span class="fu">cbind</span>(<span class="at">Odds_Ratio =</span> <span class="fu">coef</span>(s2_glm), <span class="fu">confint</span>(s2_glm)))</span>
<span id="cb77-694"><a href="#cb77-694" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-695"><a href="#cb77-695" aria-hidden="true" tabindex="-1"></a><span class="co"># Chi-Square Test for Proportions in Study 2</span></span>
<span id="cb77-696"><a href="#cb77-696" aria-hidden="true" tabindex="-1"></a>s2_table <span class="ot">&lt;-</span> <span class="fu">table</span>(s2_agg1<span class="sc">$</span>refClass, s2_agg1<span class="sc">$</span>matched_goal)</span>
<span id="cb77-697"><a href="#cb77-697" aria-hidden="true" tabindex="-1"></a><span class="fu">chisq.test</span>(s2_table)</span>
<span id="cb77-698"><a href="#cb77-698" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-699"><a href="#cb77-699" aria-hidden="true" tabindex="-1"></a><span class="in">```</span></span>
</code><button title="Copy to Clipboard" class="code-copy-button" data-in-quarto-modal=""><i class="bi"></i></button></pre></div>
</div></div></div></div></div>
</div> <!-- /content -->
<footer class="footer"><div class="nav-footer">
    <div class="nav-footer-left">
<p>Â© 2024 <a href="https://tegorman13.github.io">Thomas Gorman</a></p>
</div>   
    <div class="nav-footer-center">
<p>site made with <a href="https://cran.r-project.org/"><i class="fa-brands fa-r-project" aria-label="r-project"></i></a> and <a href="https://quarto.org/">Quarto</a></p>
<div class="toc-actions"><ul><li><a href="https://github.com/tegorman13/Representation_Study/blob/main/nb/overview.qmd" class="toc-action"><i class="bi bi-github"></i>View source</a></li></ul></div></div>
    <div class="nav-footer-right">
      <ul class="footer-items list-unstyled">
<li class="nav-item">
    <a class="nav-link" href="https://github.com/tegorman13/Representation_Study" target="_blank">
<p><i class="fa-brands fa-github fa-2.0x" aria-label="github"></i></p>
</a>
  </li>  
</ul>
</div>
  </div>
</footer><script>var lightboxQuarto = GLightbox({"closeEffect":"zoom","descPosition":"bottom","loop":false,"openEffect":"zoom","selector":".lightbox"});
(function() {
  let previousOnload = window.onload;
  window.onload = () => {
    if (previousOnload) {
      previousOnload();
    }
    lightboxQuarto.on('slide_before_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      const href = trigger.getAttribute('href');
      if (href !== null) {
        const imgEl = window.document.querySelector(`a[href="${href}"] img`);
        if (imgEl !== null) {
          const srcAttr = imgEl.getAttribute("src");
          if (srcAttr && srcAttr.startsWith("data:")) {
            slideConfig.href = srcAttr;
          }
        }
      } 
    });
  
    lightboxQuarto.on('slide_after_load', (data) => {
      const { slideIndex, slideNode, slideConfig, player, trigger } = data;
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(slideNode);
      }
    });
  
  };
  
})();
          </script>


<script src="../site_libs/quarto-html/zenscroll-min.js"></script>
</body></html>